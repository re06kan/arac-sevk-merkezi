import{a as h}from"./chunk-YCMZOG5D.js";import{$ as o,T as s,W as l,z as n,zc as p}from"./chunk-DASZUGZO.js";var u=class i{constructor(t){this.http=t}apiUrl=`${h.apiUrl}/tasks`;createTask(t){return console.log("G\xF6rev olu\u015Fturma iste\u011Fi:",t),(t.task_status===void 0||t.task_status===null)&&(t.task_status=0),this.http.post(this.apiUrl,t).pipe(s(e=>console.log("G\xF6rev olu\u015Fturma yan\u0131t\u0131:",e)),n(e=>{throw console.error("G\xF6rev olu\u015Fturma hatas\u0131:",e),console.error("Hata detay\u0131:",e.error),e}))}updateTask(t,e){return this.http.put(`${this.apiUrl}/${t}`,e)}getTaskById(t){return this.http.get(`${this.apiUrl}/${t}`)}getTasksByVehicle(t){return this.http.get(`${this.apiUrl}/vehicle/${t}`)}getAllTasksByVehicleId(t){return this.http.get(`${this.apiUrl}/vehicle/${t}/all`).pipe(s(e=>console.log("Tasks fetched:",e)),n(e=>{throw console.error("Error fetching tasks:",e),e}))}getActiveTaskByVehicleId(t){return this.http.get(`${this.apiUrl}/active/${t}`)}startTask(t){return this.http.put(`${this.apiUrl}/${t}/start`,{})}endTask(t,e){return console.log(`G\xF6rev kapatma iste\u011Fi: ID=${t}, Data=`,e),this.http.put(`${this.apiUrl}/${t}/end`,e).pipe(s(a=>console.log("G\xF6rev kapatma yan\u0131t\u0131:",a)),n(a=>{throw console.error("G\xF6rev kapatma hatas\u0131:",a),a}))}startMaintenance(t,e){return console.log("Kademe giri\u015F iste\u011Fi olu\u015Fturuluyor:",{taskId:t,maintenanceData:e}),this.http.post(`${this.apiUrl}/${t}/maintenance/start`,e).pipe(s(a=>{console.log("Kademe giri\u015F yan\u0131t\u0131:",a)}),n(a=>{throw console.error("Kademe giri\u015F hatas\u0131:",a),console.error("Hata detay\u0131:",a.error),a}))}endMaintenance(t,e,a){return this.http.put(`${this.apiUrl}/${t}/maintenance/${e}/end`,a).pipe(s(r=>{console.log("Kademe \xE7\u0131k\u0131\u015F yan\u0131t\u0131:",r)}),n(r=>{throw console.error("Kademe \xE7\u0131k\u0131\u015F hatas\u0131:",r),r}))}getMaintenanceDetails(t,e){return this.http.get(`${this.apiUrl}/${t}/maintenance/${e}`).pipe(s(a=>console.log("Bak\u0131m detaylar\u0131:",a)),n(a=>{throw console.error("Bak\u0131m detaylar\u0131 alma hatas\u0131:",a),a}))}getAllTasks(){return this.http.get(`${this.apiUrl}/all`)}getAllMaintenances(){return this.http.get(`${this.apiUrl}/maintenances/all`)}getTaskStatistics(){return this.http.get(`${this.apiUrl}/statistics`)}getDistinctTaskTypes(){return this.http.get(`${this.apiUrl}/types`)}getTaskReport(t){let e=null,a=null;return t.startDate&&(e=t.startDate.toISOString().split("T")[0]),t.endDate&&(a=t.endDate.toISOString().split("T")[0]),this.http.post(`${this.apiUrl}/report`,{vehicleIds:t.vehicles,vehicleTypes:t.vehicleTypes,driverIds:t.drivers,assignedAuthorityIds:t.assignedAuthority,taskTypes:t.taskTypes,startDate:e,endDate:a}).pipe(s(r=>console.log("Rapor verisi al\u0131nd\u0131:",r)),n(r=>{throw console.error("Rapor verisi al\u0131rken hata:",r),r}))}updateTaskEndKm(t,e,a){return this.http.put(`${this.apiUrl}/${t}/end-km`,{end_km:e,reason:a})}static \u0275fac=function(e){return new(e||i)(o(p))};static \u0275prov=l({token:i,factory:i.\u0275fac,providedIn:"root"})};export{u as a};
