import{a as Wn}from"./chunk-B4POIJ3E.js";import"./chunk-F5X5MWHG.js";import{a as Sn,b as wn,c as Fn}from"./chunk-SBIQTJW5.js";import{a as Re,b as Ve}from"./chunk-X2L6673W.js";import{a as An}from"./chunk-MRBLAIU3.js";import{a as Zt}from"./chunk-7SYFC2XX.js";import"./chunk-MS4AQ6UA.js";import{a as Dn}from"./chunk-MRUZ2QO7.js";import{a as $n,f as qn,j as Yn}from"./chunk-H6PAUPPN.js";import"./chunk-HYPZKOET.js";import{a as Q,b as X,c as Tn,d as Kn,e as J,f as ee,g as te,h as A}from"./chunk-YIHN4U44.js";import"./chunk-YCMZOG5D.js";import{b as Wt,d as De}from"./chunk-7Y2WBOK2.js";import{a as In,b as Gn,c as Ln,d as zn,e as Nn,f as Rn,g as Vn,h as Bn,i as Un,j as jn,l as Hn}from"./chunk-77IFEZ4Y.js";import{a as cn,b as fn,c as _n}from"./chunk-RGE5UITQ.js";import{c as Cn,d as Mn,f as yn,g as Z,h as xn,i as On,j as pt,k as Be,m as fe,n as Pn,o as En}from"./chunk-V53DAUX5.js";import"./chunk-CUXZVNAD.js";import{A as bn,C as kn,D as $,E as q,I as Y,J as W,a as hn,b as G,d as g,f as L,g as z,i as Oe,k as N,l as R,m as vn,n as V,o as B,p as Le,r as ze,t as U,v as j,x as H,y as pe,z as Ne}from"./chunk-QXD5EQ3A.js";import{a as ue,b as ge}from"./chunk-H22G77YG.js";import{f as rn,i as K,j as sn,k as D,n as dn,o as pn,q as un,u as Ge,x as gn}from"./chunk-PY43KAL6.js";import{$ as Et,$b as ae,$c as tn,Ab as xe,Ca as Tt,D as Ct,Db as rt,E as Mt,Eb as o,Fb as k,Gb as f,Ha as s,Hb as O,Ia as Kt,Ib as Vt,Jc as Qt,Ka as Dt,Kc as Xt,La as h,Mb as lt,Mc as Jt,Na as At,Ob as Fe,P as ie,Pb as Bt,Q as we,Qb as Ut,R as Ce,Ra as S,Rb as jt,Sa as It,Sb as Ht,T as yt,Ta as Gt,Tb as I,Ub as st,V as xt,Vb as ce,W as Ot,Wa as u,Wc as en,X as Pt,Z as tt,Zb as mt,a as Ee,aa as C,ab as it,bb as d,bd as nn,c as le,cd as an,db as Lt,dd as Ae,ea as St,eb as zt,ed as on,f as ve,ga as wt,gd as ct,ha as y,hd as Ie,ia as x,k as bt,kb as r,l as be,lb as i,mb as v,mc as Te,nb as P,nc as de,nd as ln,o as ne,ob as E,oc as F,pc as $t,pd as dt,qb as me,ra as Me,rc as qt,rd as mn,sa as se,sb as b,t as kt,tb as _,tc as Ke,ub as Nt,va as nt,vb as Rt,w as Se,wc as T,x as et,xb as at,yb as ot,z as ke,za as Ft,zb as ye,zc as Yt}from"./chunk-DASZUGZO.js";import{a as oe,b as re,g as vt}from"./chunk-OXVY4BEJ.js";var mi=["panel"],ci=["*"];function di(a,n){if(a&1&&(r(0,"div",1,0),Rt(2),i()),a&2){let e=n.id,t=_();zt(t._classList),Lt("mat-mdc-autocomplete-visible",t.showPanel)("mat-mdc-autocomplete-hidden",!t.showPanel)("mat-autocomplete-panel-animations-enabled",!t._animationsDisabled)("mat-primary",t._color==="primary")("mat-accent",t._color==="accent")("mat-warn",t._color==="warn"),d("id",t.id),it("aria-label",t.ariaLabel||null)("aria-labelledby",t._getPanelAriaLabelledby(e))}}var ut=class{source;option;constructor(n,e){this.source=n,this.option=e}},Xn=new tt("mat-autocomplete-default-options",{providedIn:"root",factory:pi});function pi(){return{autoActiveFirstOption:!1,autoSelectActiveOption:!1,hideSingleSelectionIndicator:!1,requireSelection:!1,hasBackdrop:!1}}var Jn=(()=>{class a{_changeDetectorRef=C(mt);_elementRef=C(nt);_defaults=C(Xn);_animationsDisabled=C(Ft,{optional:!0})==="NoopAnimations";_activeOptionChanges=Ee.EMPTY;_keyManager;showPanel=!1;get isOpen(){return this._isOpen&&this.showPanel}_isOpen=!1;_latestOpeningTrigger;_setColor(e){this._color=e,this._changeDetectorRef.markForCheck()}_color;template;panel;options;optionGroups;ariaLabel;ariaLabelledby;displayWith=null;autoActiveFirstOption;autoSelectActiveOption;requireSelection;panelWidth;disableRipple;optionSelected=new Me;opened=new Me;closed=new Me;optionActivated=new Me;set classList(e){this._classList=e,this._elementRef.nativeElement.className=""}_classList;get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(e){this._hideSingleSelectionIndicator=e,this._syncParentProperties()}_hideSingleSelectionIndicator;_syncParentProperties(){if(this.options)for(let e of this.options)e._changeDetectorRef.markForCheck()}id=C(an).getId("mat-autocomplete-");inertGroups;constructor(){let e=C(Jt);this.inertGroups=e?.SAFARI||!1,this.autoActiveFirstOption=!!this._defaults.autoActiveFirstOption,this.autoSelectActiveOption=!!this._defaults.autoSelectActiveOption,this.requireSelection=!!this._defaults.requireSelection,this._hideSingleSelectionIndicator=this._defaults.hideSingleSelectionIndicator??!1}ngAfterContentInit(){this._keyManager=new on(this.options).withWrap().skipPredicate(this._skipPredicate),this._activeOptionChanges=this._keyManager.change.subscribe(e=>{this.isOpen&&this.optionActivated.emit({source:this,option:this.options.toArray()[e]||null})}),this._setVisibility()}ngOnDestroy(){this._keyManager?.destroy(),this._activeOptionChanges.unsubscribe()}_setScrollTop(e){this.panel&&(this.panel.nativeElement.scrollTop=e)}_getScrollTop(){return this.panel?this.panel.nativeElement.scrollTop:0}_setVisibility(){this.showPanel=!!this.options.length,this._changeDetectorRef.markForCheck()}_emitSelectEvent(e){let t=new ut(this,e);this.optionSelected.emit(t)}_getPanelAriaLabelledby(e){if(this.ariaLabel)return null;let t=e?e+" ":"";return this.ariaLabelledby?t+this.ariaLabelledby:e}_skipPredicate(){return!1}static \u0275fac=function(t){return new(t||a)};static \u0275cmp=S({type:a,selectors:[["mat-autocomplete"]],contentQueries:function(t,l,m){if(t&1&&(at(m,Z,5),at(m,Mn,5)),t&2){let p;ye(p=xe())&&(l.options=p),ye(p=xe())&&(l.optionGroups=p)}},viewQuery:function(t,l){if(t&1&&(ot(Kt,7),ot(mi,5)),t&2){let m;ye(m=xe())&&(l.template=m.first),ye(m=xe())&&(l.panel=m.first)}},hostAttrs:[1,"mat-mdc-autocomplete"],inputs:{ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],displayWith:"displayWith",autoActiveFirstOption:[2,"autoActiveFirstOption","autoActiveFirstOption",ae],autoSelectActiveOption:[2,"autoSelectActiveOption","autoSelectActiveOption",ae],requireSelection:[2,"requireSelection","requireSelection",ae],panelWidth:"panelWidth",disableRipple:[2,"disableRipple","disableRipple",ae],classList:[0,"class","classList"],hideSingleSelectionIndicator:[2,"hideSingleSelectionIndicator","hideSingleSelectionIndicator",ae]},outputs:{optionSelected:"optionSelected",opened:"opened",closed:"closed",optionActivated:"optionActivated"},exportAs:["matAutocomplete"],features:[lt([{provide:Cn,useExisting:a}])],ngContentSelectors:ci,decls:1,vars:0,consts:[["panel",""],["role","listbox",1,"mat-mdc-autocomplete-panel","mdc-menu-surface","mdc-menu-surface--open",3,"id"]],template:function(t,l){t&1&&(Nt(),u(0,di,3,17,"ng-template"))},styles:["div.mat-mdc-autocomplete-panel{width:100%;max-height:256px;visibility:hidden;transform-origin:center top;overflow:auto;padding:8px 0;box-sizing:border-box;position:static;border-radius:var(--mat-autocomplete-container-shape, var(--mat-sys-corner-extra-small));box-shadow:var(--mat-autocomplete-container-elevation-shadow, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12));background-color:var(--mat-autocomplete-background-color, var(--mat-sys-surface-container))}@media(forced-colors: active){div.mat-mdc-autocomplete-panel{outline:solid 1px}}.cdk-overlay-pane:not(.mat-mdc-autocomplete-panel-above) div.mat-mdc-autocomplete-panel{border-top-left-radius:0;border-top-right-radius:0}.mat-mdc-autocomplete-panel-above div.mat-mdc-autocomplete-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:center bottom}div.mat-mdc-autocomplete-panel.mat-mdc-autocomplete-visible{visibility:visible}div.mat-mdc-autocomplete-panel.mat-mdc-autocomplete-hidden{visibility:hidden;pointer-events:none}@keyframes _mat-autocomplete-enter{from{opacity:0;transform:scaleY(0.8)}to{opacity:1;transform:none}}.mat-autocomplete-panel-animations-enabled{animation:_mat-autocomplete-enter 120ms cubic-bezier(0, 0, 0.2, 1)}mat-autocomplete{display:none}"],encapsulation:2,changeDetection:0})}return a})();var ui={provide:hn,useExisting:xt(()=>gt),multi:!0};var ei=new tt("mat-autocomplete-scroll-strategy",{providedIn:"root",factory:()=>{let a=C(Ge);return()=>a.scrollStrategies.reposition()}});function gi(a){return()=>a.scrollStrategies.reposition()}var fi={provide:ei,deps:[Ge],useFactory:gi},gt=(()=>{class a{_environmentInjector=C(St);_element=C(nt);_overlay=C(Ge);_viewContainerRef=C(At);_zone=C(se);_changeDetectorRef=C(mt);_dir=C(ln,{optional:!0});_formField=C(kn,{optional:!0,host:!0});_viewportRuler=C(dn);_scrollStrategy=C(ei);_renderer=C(Dt);_defaults=C(Xn,{optional:!0});_overlayRef;_portal;_componentDestroyed=!1;_initialized=new ve;_keydownSubscription;_outsideClickSubscription;_cleanupWindowBlur;_previousValue;_valueOnAttach;_valueOnLastKeydown;_positionStrategy;_manuallyFloatingLabel=!1;_closingActionsSubscription;_viewportSubscription=Ee.EMPTY;_breakpointObserver=C(en);_handsetLandscapeSubscription=Ee.EMPTY;_canOpenOnNextFocus=!0;_valueBeforeAutoSelection;_pendingAutoselectedOption;_closeKeyEventStream=new ve;_windowBlurHandler=()=>{this._canOpenOnNextFocus=this.panelOpen||!this._hasFocus()};_onChange=()=>{};_onTouched=()=>{};autocomplete;position="auto";connectedTo;autocompleteAttribute="off";autocompleteDisabled;constructor(){}_aboveClass="mat-mdc-autocomplete-panel-above";ngAfterViewInit(){this._initialized.next(),this._initialized.complete(),this._cleanupWindowBlur=this._renderer.listen("window","blur",this._windowBlurHandler)}ngOnChanges(e){e.position&&this._positionStrategy&&(this._setStrategyPositions(this._positionStrategy),this.panelOpen&&this._overlayRef.updatePosition())}ngOnDestroy(){this._cleanupWindowBlur?.(),this._handsetLandscapeSubscription.unsubscribe(),this._viewportSubscription.unsubscribe(),this._componentDestroyed=!0,this._destroyPanel(),this._closeKeyEventStream.complete(),this._clearFromModal()}get panelOpen(){return this._overlayAttached&&this.autocomplete.showPanel}_overlayAttached=!1;openPanel(){this._openPanelInternal()}closePanel(){this._resetLabel(),this._overlayAttached&&(this.panelOpen&&this._zone.run(()=>{this.autocomplete.closed.emit()}),this.autocomplete._latestOpeningTrigger===this&&(this.autocomplete._isOpen=!1,this.autocomplete._latestOpeningTrigger=null),this._overlayAttached=!1,this._pendingAutoselectedOption=null,this._overlayRef&&this._overlayRef.hasAttached()&&(this._overlayRef.detach(),this._closingActionsSubscription.unsubscribe()),this._updatePanelState(),this._componentDestroyed||this._changeDetectorRef.detectChanges(),this._trackedModal&&Ie(this._trackedModal,"aria-owns",this.autocomplete.id))}updatePosition(){this._overlayAttached&&this._overlayRef.updatePosition()}get panelClosingActions(){return Se(this.optionSelections,this.autocomplete._keyManager.tabOut.pipe(et(()=>this._overlayAttached)),this._closeKeyEventStream,this._getOutsideClickStream(),this._overlayRef?this._overlayRef.detachments().pipe(et(()=>this._overlayAttached)):bt()).pipe(ne(e=>e instanceof yn?e:null))}optionSelections=kt(()=>{let e=this.autocomplete?this.autocomplete.options:null;return e?e.changes.pipe(ie(e),we(()=>Se(...e.map(t=>t.onSelectionChange)))):this._initialized.pipe(we(()=>this.optionSelections))});get activeOption(){return this.autocomplete&&this.autocomplete._keyManager?this.autocomplete._keyManager.activeItem:null}_getOutsideClickStream(){return new le(e=>{let t=m=>{let p=Xt(m),c=this._formField?this._formField.getConnectedOverlayOrigin().nativeElement:null,M=this.connectedTo?this.connectedTo.elementRef.nativeElement:null;this._overlayAttached&&p!==this._element.nativeElement&&!this._hasFocus()&&(!c||!c.contains(p))&&(!M||!M.contains(p))&&this._overlayRef&&!this._overlayRef.overlayElement.contains(p)&&e.next(m)},l=[this._renderer.listen("document","click",t),this._renderer.listen("document","auxclick",t),this._renderer.listen("document","touchend",t)];return()=>{l.forEach(m=>m())}})}writeValue(e){Promise.resolve(null).then(()=>this._assignOptionValue(e))}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this._element.nativeElement.disabled=e}_handleKeydown(e){let t=e.keyCode,l=Ae(e);if(t===27&&!l&&e.preventDefault(),this._valueOnLastKeydown=this._element.nativeElement.value,this.activeOption&&t===13&&this.panelOpen&&!l)this.activeOption._selectViaInteraction(),this._resetActiveItem(),e.preventDefault();else if(this.autocomplete){let m=this.autocomplete._keyManager.activeItem,p=t===38||t===40;t===9||p&&!l&&this.panelOpen?this.autocomplete._keyManager.onKeydown(e):p&&this._canOpen()&&this._openPanelInternal(this._valueOnLastKeydown),(p||this.autocomplete._keyManager.activeItem!==m)&&(this._scrollToOption(this.autocomplete._keyManager.activeItemIndex||0),this.autocomplete.autoSelectActiveOption&&this.activeOption&&(this._pendingAutoselectedOption||(this._valueBeforeAutoSelection=this._valueOnLastKeydown),this._pendingAutoselectedOption=this.activeOption,this._assignOptionValue(this.activeOption.value)))}}_handleInput(e){let t=e.target,l=t.value;if(t.type==="number"&&(l=l==""?null:parseFloat(l)),this._previousValue!==l){if(this._previousValue=l,this._pendingAutoselectedOption=null,(!this.autocomplete||!this.autocomplete.requireSelection)&&this._onChange(l),!l)this._clearPreviousSelectedOption(null,!1);else if(this.panelOpen&&!this.autocomplete.requireSelection){let m=this.autocomplete.options?.find(p=>p.selected);if(m){let p=this._getDisplayValue(m.value);l!==p&&m.deselect(!1)}}if(this._canOpen()&&this._hasFocus()){let m=this._valueOnLastKeydown??this._element.nativeElement.value;this._valueOnLastKeydown=null,this._openPanelInternal(m)}}}_handleFocus(){this._canOpenOnNextFocus?this._canOpen()&&(this._previousValue=this._element.nativeElement.value,this._attachOverlay(this._previousValue),this._floatLabel(!0)):this._canOpenOnNextFocus=!0}_handleClick(){this._canOpen()&&!this.panelOpen&&this._openPanelInternal()}_hasFocus(){return Qt()===this._element.nativeElement}_floatLabel(e=!1){this._formField&&this._formField.floatLabel==="auto"&&(e?this._formField._animateAndLockLabel():this._formField.floatLabel="always",this._manuallyFloatingLabel=!0)}_resetLabel(){this._manuallyFloatingLabel&&(this._formField&&(this._formField.floatLabel="auto"),this._manuallyFloatingLabel=!1)}_subscribeToClosingActions(){let e=new le(l=>{Tt(()=>{l.next()},{injector:this._environmentInjector})}),t=this.autocomplete.options.changes.pipe(yt(()=>this._positionStrategy.reapplyLastPosition()),Mt(0));return Se(e,t).pipe(we(()=>this._zone.run(()=>{let l=this.panelOpen;return this._resetActiveItem(),this._updatePanelState(),this._changeDetectorRef.detectChanges(),this.panelOpen&&this._overlayRef.updatePosition(),l!==this.panelOpen&&(this.panelOpen?this._emitOpened():this.autocomplete.closed.emit()),this.panelClosingActions})),Ct(1)).subscribe(l=>this._setValueAndClose(l))}_emitOpened(){this.autocomplete.opened.emit()}_destroyPanel(){this._overlayRef&&(this.closePanel(),this._overlayRef.dispose(),this._overlayRef=null)}_getDisplayValue(e){let t=this.autocomplete;return t&&t.displayWith?t.displayWith(e):e}_assignOptionValue(e){let t=this._getDisplayValue(e);e==null&&this._clearPreviousSelectedOption(null,!1),this._updateNativeInputValue(t??"")}_updateNativeInputValue(e){this._formField?this._formField._control.value=e:this._element.nativeElement.value=e,this._previousValue=e}_setValueAndClose(e){let t=this.autocomplete,l=e?e.source:this._pendingAutoselectedOption;l?(this._clearPreviousSelectedOption(l),this._assignOptionValue(l.value),this._onChange(l.value),t._emitSelectEvent(l),this._element.nativeElement.focus()):t.requireSelection&&this._element.nativeElement.value!==this._valueOnAttach&&(this._clearPreviousSelectedOption(null),this._assignOptionValue(null),this._onChange(null)),this.closePanel()}_clearPreviousSelectedOption(e,t){this.autocomplete?.options?.forEach(l=>{l!==e&&l.selected&&l.deselect(t)})}_openPanelInternal(e=this._element.nativeElement.value){if(this._attachOverlay(e),this._floatLabel(),this._trackedModal){let t=this.autocomplete.id;ct(this._trackedModal,"aria-owns",t)}}_attachOverlay(e){this.autocomplete;let t=this._overlayRef;t?(this._positionStrategy.setOrigin(this._getConnectedElement()),t.updateSize({width:this._getPanelWidth()})):(this._portal=new mn(this.autocomplete.template,this._viewContainerRef,{id:this._formField?.getLabelId()}),t=this._overlay.create(this._getOverlayConfig()),this._overlayRef=t,this._viewportSubscription=this._viewportRuler.change().subscribe(()=>{this.panelOpen&&t&&t.updateSize({width:this._getPanelWidth()})}),this._handsetLandscapeSubscription=this._breakpointObserver.observe(cn.HandsetLandscape).subscribe(m=>{m.matches?this._positionStrategy.withFlexibleDimensions(!0).withGrowAfterOpen(!0).withViewportMargin(8):this._positionStrategy.withFlexibleDimensions(!1).withGrowAfterOpen(!1).withViewportMargin(0)})),t&&!t.hasAttached()&&(t.attach(this._portal),this._valueOnAttach=e,this._valueOnLastKeydown=null,this._closingActionsSubscription=this._subscribeToClosingActions());let l=this.panelOpen;this.autocomplete._isOpen=this._overlayAttached=!0,this.autocomplete._latestOpeningTrigger=this,this.autocomplete._setColor(this._formField?.color),this._updatePanelState(),this._applyModalPanelOwnership(),this.panelOpen&&l!==this.panelOpen&&this._emitOpened()}_handlePanelKeydown=e=>{(e.keyCode===27&&!Ae(e)||e.keyCode===38&&Ae(e,"altKey"))&&(this._pendingAutoselectedOption&&(this._updateNativeInputValue(this._valueBeforeAutoSelection??""),this._pendingAutoselectedOption=null),this._closeKeyEventStream.next(),this._resetActiveItem(),e.stopPropagation(),e.preventDefault())};_updatePanelState(){if(this.autocomplete._setVisibility(),this.panelOpen){let e=this._overlayRef;this._keydownSubscription||(this._keydownSubscription=e.keydownEvents().subscribe(this._handlePanelKeydown)),this._outsideClickSubscription||(this._outsideClickSubscription=e.outsidePointerEvents().subscribe())}else this._keydownSubscription?.unsubscribe(),this._outsideClickSubscription?.unsubscribe(),this._keydownSubscription=this._outsideClickSubscription=null}_getOverlayConfig(){return new un({positionStrategy:this._getOverlayPosition(),scrollStrategy:this._scrollStrategy(),width:this._getPanelWidth(),direction:this._dir??void 0,hasBackdrop:this._defaults?.hasBackdrop,backdropClass:this._defaults?.backdropClass,panelClass:this._defaults?.overlayPanelClass})}_getOverlayPosition(){let e=this._overlay.position().flexibleConnectedTo(this._getConnectedElement()).withFlexibleDimensions(!1).withPush(!1);return this._setStrategyPositions(e),this._positionStrategy=e,e}_setStrategyPositions(e){let t=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],l=this._aboveClass,m=[{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:l},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:l}],p;this.position==="above"?p=m:this.position==="below"?p=t:p=[...t,...m],e.withPositions(p)}_getConnectedElement(){return this.connectedTo?this.connectedTo.elementRef:this._formField?this._formField.getConnectedOverlayOrigin():this._element}_getPanelWidth(){return this.autocomplete.panelWidth||this._getHostWidth()}_getHostWidth(){return this._getConnectedElement().nativeElement.getBoundingClientRect().width}_resetActiveItem(){let e=this.autocomplete;if(e.autoActiveFirstOption){let t=-1;for(let l=0;l<e.options.length;l++)if(!e.options.get(l).disabled){t=l;break}e._keyManager.setActiveItem(t)}else e._keyManager.setActiveItem(-1)}_canOpen(){let e=this._element.nativeElement;return!e.readOnly&&!e.disabled&&!this.autocompleteDisabled}_scrollToOption(e){let t=this.autocomplete,l=xn(e,t.options,t.optionGroups);if(e===0&&l===1)t._setScrollTop(0);else if(t.panel){let m=t.options.toArray()[e];if(m){let p=m._getHostElement(),c=On(p.offsetTop,p.offsetHeight,t._getScrollTop(),t.panel.nativeElement.offsetHeight);t._setScrollTop(c)}}}_trackedModal=null;_applyModalPanelOwnership(){let e=this._element.nativeElement.closest('body > .cdk-overlay-container [aria-modal="true"]');if(!e)return;let t=this.autocomplete.id;this._trackedModal&&Ie(this._trackedModal,"aria-owns",t),ct(e,"aria-owns",t),this._trackedModal=e}_clearFromModal(){if(this._trackedModal){let e=this.autocomplete.id;Ie(this._trackedModal,"aria-owns",e),this._trackedModal=null}}static \u0275fac=function(t){return new(t||a)};static \u0275dir=Gt({type:a,selectors:[["input","matAutocomplete",""],["textarea","matAutocomplete",""]],hostAttrs:[1,"mat-mdc-autocomplete-trigger"],hostVars:7,hostBindings:function(t,l){t&1&&b("focusin",function(){return l._handleFocus()})("blur",function(){return l._onTouched()})("input",function(p){return l._handleInput(p)})("keydown",function(p){return l._handleKeydown(p)})("click",function(){return l._handleClick()}),t&2&&it("autocomplete",l.autocompleteAttribute)("role",l.autocompleteDisabled?null:"combobox")("aria-autocomplete",l.autocompleteDisabled?null:"list")("aria-activedescendant",l.panelOpen&&l.activeOption?l.activeOption.id:null)("aria-expanded",l.autocompleteDisabled?null:l.panelOpen.toString())("aria-controls",l.autocompleteDisabled||!l.panelOpen||l.autocomplete==null?null:l.autocomplete.id)("aria-haspopup",l.autocompleteDisabled?null:"listbox")},inputs:{autocomplete:[0,"matAutocomplete","autocomplete"],position:[0,"matAutocompletePosition","position"],connectedTo:[0,"matAutocompleteConnectedTo","connectedTo"],autocompleteAttribute:[0,"autocomplete","autocompleteAttribute"],autocompleteDisabled:[2,"matAutocompleteDisabled","autocompleteDisabled",ae]},exportAs:["matAutocompleteTrigger"],features:[lt([ui]),wt]})}return a})(),ti=(()=>{class a{static \u0275fac=function(t){return new(t||a)};static \u0275mod=It({type:a});static \u0275inj=Pt({providers:[fi],imports:[gn,pt,dt,pn,pt,dt]})}return a})();function vi(a,n){if(a&1&&(r(0,"mat-option",17),o(1),i()),a&2){let e=n.$implicit;d("value",e),s(),k(e)}}function bi(a,n){a&1&&(r(0,"mat-error"),o(1,"Ar\u0131za t\xFCr\xFC se\xE7ilmelidir"),i())}function ki(a,n){if(a&1&&(r(0,"mat-option",17),o(1),i()),a&2){let e=n.$implicit;d("value",e),s(),k(e)}}function Ci(a,n){a&1&&(r(0,"mat-error"),o(1,"\xD6ncelik se\xE7ilmelidir"),i())}function Mi(a,n){a&1&&(r(0,"mat-error"),o(1,"Teknisyen ad\u0131 girilmelidir"),i())}function yi(a,n){a&1&&(r(0,"mat-error"),o(1,"En az 3 karakter girilmelidir"),i())}function xi(a,n){a&1&&(r(0,"mat-error"),o(1,"Sadece harf giriniz"),i())}function Oi(a,n){a&1&&(r(0,"mat-error"),o(1,"Tahmini s\xFCre girilmelidir"),i())}function Pi(a,n){a&1&&(r(0,"mat-error"),o(1,"Ar\u0131za a\xE7\u0131klamas\u0131 girilmelidir"),i())}var Ue=class a{constructor(n,e,t,l,m){this.dialogRef=n;this.data=e;this.fb=t;this.ngZone=l;this.router=m;this.kademeForm=this.fb.group({arizaTuru:["",g.required],arizaAciklama:["",[g.required,g.maxLength(250)]],oncelik:["Normal",g.required],tahminiSure:["",g.required],sorumluTeknisyen:["",[g.required,g.minLength(3),g.maxLength(50),g.pattern("^[a-zA-Z\u011F\xFC\u015F\u0131\xF6\xE7\u011E\xDC\u015E\u0130\xD6\xC7\\s]*$")]],notlar:["",g.maxLength(200)]}),this.ngZone.runOutsideAngular(()=>{document.addEventListener("wheel",this.onWheel,{passive:!0})}),this.dialogRef.addPanelClass("kademe-giris-dialog"),this.dialogRef.updatePosition({top:"50px"}),this.dialogRef.updateSize("1200px","auto"),this.dialogRef.beforeClosed().subscribe(()=>{window.removeEventListener("wheel",this.onWheel)}),this.dialogRef.backdropClick().subscribe(()=>{this.onCancel()}),this.dialogRef.keydownEvents().subscribe(p=>{p.key==="Escape"&&this.onCancel()})}kademeForm;arizaTurleri=["Mekanik","Elektrik","Lastik","Kaporta","Di\u011Fer"];oncelikler=["Acil","Normal"];toUpperCase(n){let e=n.target,t=e.selectionStart,l=e.selectionEnd;e.value=e.value.toLocaleUpperCase("tr-TR"),e.setSelectionRange(t,l)}onlyLetters(n){let e=/[a-zA-ZğüşıöçĞÜŞİÖÇ\s]/,t=String.fromCharCode(n.charCode);return e.test(t)?!0:(n.preventDefault(),!1)}ngOnInit(){document.addEventListener("wheel",this.handleWheel,{passive:!0}),console.log("Vehicle:",this.data.vehicle),console.log("Current Task:",this.data.currentTask)}handleWheel=()=>{};ngOnDestroy(){document.removeEventListener("wheel",this.handleWheel)}onWheel=n=>{};onSubmit(){if(this.kademeForm.valid){let n=this.kademeForm.value;this.dialogRef.close(re(oe({},n),{success:!0,navigateToDashboard:!0})),setTimeout(()=>{this.router.navigate(["/dashboard"])},500)}}onCancel(){this.dialogRef.close()}static \u0275fac=function(e){return new(e||a)(h(Q),h(X),h(U),h(se),h(De))};static \u0275cmp=S({type:a,selectors:[["app-kademe-giris-modal"]],hostAttrs:["role","dialog","aria-modal","true","tabindex","-1",1,"kademe-giris-modal",2,"display","block"],decls:67,vars:18,consts:[["mat-dialog-title","",1,"mdc-dialog-title"],[3,"formGroup"],[1,"vehicle-info"],[1,"info-grid"],[1,"fault-info"],["appearance","outline"],["formControlName","arizaTuru","required",""],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["formControlName","oncelik","required",""],["matInput","","formControlName","sorumluTeknisyen","placeholder","Teknisyen ad\u0131n\u0131 giriniz","required","","maxlength","50",3,"input","keypress"],["matInput","","type","number","formControlName","tahminiSure","required",""],["matInput","","formControlName","arizaAciklama","rows","3","required","","maxlength","250"],["align","end"],["matInput","","formControlName","notlar","rows","2","placeholder","Opsiyonel notlar...","maxlength","200"],["mat-raised-button","","color","warn",2,"background-color","#f44336 !important","color","white !important",3,"click"],["mat-raised-button","","color","primary",2,"background-color","#4caf50 !important","color","white !important",3,"click","disabled"],[3,"value"]],template:function(e,t){if(e&1&&(r(0,"h2",0),o(1,"Kademe Giri\u015F \u0130\u015Flemi"),i(),r(2,"mat-dialog-content")(3,"form",1)(4,"div",2)(5,"div",3)(6,"p")(7,"strong"),o(8,"Askeri Plaka:"),i(),o(9),i(),r(10,"p")(11,"strong"),o(12,"Sivil Plaka:"),i(),o(13),i(),r(14,"p")(15,"strong"),o(16,"Marka/Model:"),i(),o(17),i(),r(18,"p")(19,"strong"),o(20,"Tahsis:"),i(),o(21),i()()(),r(22,"div",4)(23,"h3"),o(24,"Ar\u0131za Bilgileri"),i(),r(25,"mat-form-field",5)(26,"mat-label"),o(27,"Ar\u0131za T\xFCr\xFC"),i(),r(28,"mat-select",6),u(29,vi,2,2,"mat-option",7),i(),u(30,bi,2,0,"mat-error",8),i(),r(31,"mat-form-field",5)(32,"mat-label"),o(33,"\xD6ncelik"),i(),r(34,"mat-select",9),u(35,ki,2,2,"mat-option",7),i(),u(36,Ci,2,0,"mat-error",8),i(),r(37,"mat-form-field",5)(38,"mat-label"),o(39,"Sorumlu Teknisyen"),i(),r(40,"input",10),b("input",function(m){return t.toUpperCase(m)})("keypress",function(m){return t.onlyLetters(m)}),i(),u(41,Mi,2,0,"mat-error",8)(42,yi,2,0,"mat-error",8)(43,xi,2,0,"mat-error",8),i(),r(44,"mat-form-field",5)(45,"mat-label"),o(46,"Tahmini S\xFCre (Saat)"),i(),v(47,"input",11),u(48,Oi,2,0,"mat-error",8),i(),r(49,"mat-form-field",5)(50,"mat-label"),o(51,"Ar\u0131za A\xE7\u0131klamas\u0131"),i(),v(52,"textarea",12),u(53,Pi,2,0,"mat-error",8),r(54,"mat-hint",13),o(55),i()(),r(56,"mat-form-field",5)(57,"mat-label"),o(58,"Notlar"),i(),v(59,"textarea",14),r(60,"mat-hint",13),o(61),i()()()()(),r(62,"mat-dialog-actions",13)(63,"button",15),b("click",function(){return t.onCancel()}),o(64," \u0130ptal "),i(),r(65,"button",16),b("click",function(){return t.onSubmit()}),o(66," Kaydet "),i()()),e&2){let l,m,p,c,M,w,Xe,Pe,he;s(3),d("formGroup",t.kademeForm),s(6),f(" ",(t.data.vehicle==null?null:t.data.vehicle.military_plate)||"-",""),s(4),f(" ",(t.data.vehicle==null?null:t.data.vehicle.civilian_plate)||"-",""),s(4),O(" ",(t.data.vehicle==null?null:t.data.vehicle.brand)||"-"," ",(t.data.vehicle==null?null:t.data.vehicle.model)||"-",""),s(4),f(" ",(t.data.vehicle==null?null:t.data.vehicle.assigned_authority)||"-",""),s(8),d("ngForOf",t.arizaTurleri),s(),d("ngIf",(l=t.kademeForm.get("arizaTuru"))==null?null:l.hasError("required")),s(5),d("ngForOf",t.oncelikler),s(),d("ngIf",(m=t.kademeForm.get("oncelik"))==null?null:m.hasError("required")),s(5),d("ngIf",(p=t.kademeForm.get("sorumluTeknisyen"))==null?null:p.hasError("required")),s(),d("ngIf",(c=t.kademeForm.get("sorumluTeknisyen"))==null?null:c.hasError("minlength")),s(),d("ngIf",(M=t.kademeForm.get("sorumluTeknisyen"))==null?null:M.hasError("pattern")),s(5),d("ngIf",(w=t.kademeForm.get("tahminiSure"))==null?null:w.hasError("required")),s(5),d("ngIf",(Xe=t.kademeForm.get("arizaAciklama"))==null?null:Xe.hasError("required")),s(2),f("",((Pe=t.kademeForm.get("arizaAciklama"))==null||Pe.value==null?null:Pe.value.length)||0,"/250"),s(6),f("",((he=t.kademeForm.get("notlar"))==null||he.value==null?null:he.value.length)||0,"/200"),s(4),d("disabled",t.kademeForm.invalid)}},dependencies:[T,de,F,j,N,G,R,L,z,Le,ze,V,B,A,J,te,ee,D,K,q,$,H,Ne,pe,W,Y,fe,Be,Z],styles:["[_nghost-%COMP%]{display:block;min-width:1200px}.vehicle-info[_ngcontent-%COMP%]{margin-bottom:0;background:#f8fafc;padding:2px;border-radius:12px;box-shadow:0 2px 4px #0000000d}.vehicle-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#2c3e50;font-size:1.2em;margin-bottom:16px;font-weight:500}.vehicle-info[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:5px;background:#fff;padding:0;border-radius:8px;border:1px solid #e0e0e0}.vehicle-info[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;padding:12px;background:#f8fafc;border-radius:6px;border-left:3px solid #1976d2}.vehicle-info[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#1976d2;margin-right:12px;font-weight:500;font-size:.9em;text-transform:uppercase;letter-spacing:.5px}.fault-info[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:20px;padding:20px 40px;background:#fff;border-radius:12px;box-shadow:0 2px 4px #0000000d}.fault-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{grid-column:1/-1;color:#2c3e50;font-size:1.2em;margin-bottom:16px;padding-bottom:12px;border-bottom:2px solid #e0e0e0;font-weight:500}.fault-info[_ngcontent-%COMP%]   .mat-form-field.full-width[_ngcontent-%COMP%], .fault-info[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]:nth-child(3), .fault-info[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]:last-child{grid-column:1/-1}.fault-info[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]:nth-child(5), .fault-info[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]:nth-child(6), .fault-info[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]:nth-child(7){grid-column:1/-1}.fault-info[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]:nth-child(2), .fault-info[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]:nth-child(3), .fault-info[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]:nth-child(4), .fault-info[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]:nth-child(5){grid-column:span 1}.fault-info[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]:nth-child(6), .fault-info[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]:nth-child(7){grid-column:1/-1}.fault-info[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]:nth-child(2), .fault-info[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]:nth-child(3), .fault-info[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]:nth-child(4), .fault-info[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]:nth-child(5){grid-column:span 1;width:90%;justify-self:center}.fault-info[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]:nth-child(6), .fault-info[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]:nth-child(7){grid-column:1/-1;width:97%;justify-self:center}  .mat-dialog-title{margin-bottom:24px;padding-bottom:16px;color:#1976d2;font-size:1.75em;border-bottom:2px solid #e0e0e0;font-weight:500}  .mat-form-field{width:100%}  .mat-form-field .mat-form-field-wrapper{margin:0}  .mat-form-field .mat-form-field-outline{background:#fff}  .mat-form-field .mat-form-field-label{color:#666}  .mat-form-field .mat-input-element{padding:4px 0}  .mat-form-field .mat-select-value{color:#2c3e50}  .mat-form-field textarea.mat-input-element{padding:8px 0;line-height:1.5}  .mat-dialog-actions{padding:16px 24px;margin-bottom:0;background:#f8fafc;border-top:1px solid #e0e0e0;gap:12px}  .mat-dialog-actions button{min-width:120px;padding:8px 24px;font-weight:500}  .mat-dialog-actions button[color=primary]{background-color:#1976d2}  .mat-dialog-actions button[color=primary]:hover{background-color:#43a047!important}  .mat-dialog-actions button[color=primary]:disabled{background-color:#0000001f!important;color:#00000061!important}  .mat-dialog-actions button[color=warn]{background-color:#f44336!important;color:#fff!important}  .mat-dialog-actions button[color=warn]:hover{background-color:#e53935!important;transform:translateY(-2px);transition:all .3s ease}  .mat-mdc-select-panel,   .mat-select-panel,   .mat-autocomplete-panel{background:#fff!important;border-radius:8px!important;box-shadow:0 2px 8px #0000001a!important}  .mat-mdc-select-panel .mat-mdc-option,   .mat-mdc-select-panel .mat-option,   .mat-select-panel .mat-mdc-option,   .mat-select-panel .mat-option,   .mat-autocomplete-panel .mat-mdc-option,   .mat-autocomplete-panel .mat-option{background-color:#fff!important;padding:0 16px}  .mat-mdc-select-panel .mat-mdc-option:hover,   .mat-mdc-select-panel .mat-option:hover,   .mat-select-panel .mat-mdc-option:hover,   .mat-select-panel .mat-option:hover,   .mat-autocomplete-panel .mat-mdc-option:hover,   .mat-autocomplete-panel .mat-option:hover{background:#1976d20d!important}  .mat-mdc-select-panel .mat-mdc-option.mdc-list-item--selected,   .mat-mdc-select-panel .mat-mdc-option.mat-selected,   .mat-mdc-select-panel .mat-option.mdc-list-item--selected,   .mat-mdc-select-panel .mat-option.mat-selected,   .mat-select-panel .mat-mdc-option.mdc-list-item--selected,   .mat-select-panel .mat-mdc-option.mat-selected,   .mat-select-panel .mat-option.mdc-list-item--selected,   .mat-select-panel .mat-option.mat-selected,   .mat-autocomplete-panel .mat-mdc-option.mdc-list-item--selected,   .mat-autocomplete-panel .mat-mdc-option.mat-selected,   .mat-autocomplete-panel .mat-option.mdc-list-item--selected,   .mat-autocomplete-panel .mat-option.mat-selected{background:#1976d21a!important;color:#1976d2!important}  .mat-mdc-select-panel .mat-mdc-option .mdc-list-item__primary-text,   .mat-mdc-select-panel .mat-option .mdc-list-item__primary-text,   .mat-select-panel .mat-mdc-option .mdc-list-item__primary-text,   .mat-select-panel .mat-option .mdc-list-item__primary-text,   .mat-autocomplete-panel .mat-mdc-option .mdc-list-item__primary-text,   .mat-autocomplete-panel .mat-option .mdc-list-item__primary-text{color:#2c3e50}  .mat-mdc-form-field-focus-overlay,   .mat-form-field-flex{background-color:#fff!important}  .mat-select-panel{background:#fff;border-radius:8px!important}  .mat-select-panel .mat-option{padding:12px 16px}  .mat-select-panel .mat-option:hover{background:#1976d20d}  .mat-select-panel .mat-option.mat-selected{background:#1976d21a;color:#1976d2}  .mat-dialog-container{background-color:#fff3e0!important}  .mat-mdc-dialog-title,   .mat-dialog-title{text-align:center!important;margin-bottom:24px!important;padding-bottom:16px!important;color:#e65100!important;font-size:1.75em!important;border-bottom:2px solid #ffb74d!important;font-weight:700!important}  .mat-dialog-content{max-height:80vh;padding:0 24px;margin:0}  .mat-dialog-content::-webkit-scrollbar{width:8px;height:8px}  .mat-dialog-content::-webkit-scrollbar-thumb{background:#90a4ae;border-radius:4px}  .mat-dialog-content::-webkit-scrollbar-track{background:#eceff1}"]})};function Si(a,n){if(a&1&&(r(0,"mat-option",27),o(1),i()),a&2){let e=n.$implicit;d("value",e),s(),k(e)}}function wi(a,n){a&1&&(r(0,"mat-error"),o(1,"Gerekli"),i())}function Fi(a,n){a&1&&(r(0,"mat-error"),o(1,"Gerekli"),i())}function Ti(a,n){a&1&&(r(0,"mat-error"),o(1,"KM \xE7ok d\xFC\u015F\xFCk"),i())}function Ki(a,n){a&1&&(r(0,"mat-error"),o(1,"Gerekli"),i())}var Ye=class a{constructor(n,e,t,l){this.dialogRef=n;this.data=e;this.fb=t;this.ngZone=l;this.currentKm=e.activeTask?.start_km||0,console.log("Mevcut KM de\u011Feri:",this.currentKm),this.kademeCikisForm=this.fb.group({islemAciklama:["",g.required],sonuc:["Onar\u0131ld\u0131",g.required],degisenParcalar:[[]],notlar:[""],yeniKm:["",[g.required,this.kmValidator(this.currentKm)]]})}kademeCikisForm;sonuclar=["Onar\u0131ld\u0131","K\u0131smen Onar\u0131ld\u0131","Onar\u0131lamad\u0131"];currentKm=0;ngOnInit(){document.addEventListener("wheel",this.handleWheel,{passive:!0}),console.log("Kademe \xE7\u0131k\u0131\u015F modal\u0131 a\xE7\u0131ld\u0131:",this.data),console.log("Ara\xE7:",this.data.vehicle),console.log("Aktif g\xF6rev:",this.data.activeTask)}ngOnDestroy(){document.removeEventListener("wheel",this.handleWheel)}handleWheel=()=>{};kmValidator(n){return e=>{let t=Number(e.value);return isNaN(t)||t===null||t===void 0?null:t<=n?{minKm:{required:n+1,actual:t}}:null}}onSubmit(){if(this.kademeCikisForm.valid){if(Number(this.kademeCikisForm.get("yeniKm")?.value)<=this.currentKm){this.kademeCikisForm.get("yeniKm")?.setErrors({minKm:!0});return}console.log("Form g\xF6nderiliyor:",this.kademeCikisForm.value),this.dialogRef.close(this.kademeCikisForm.value)}}onCancel(){this.dialogRef.close()}static \u0275fac=function(e){return new(e||a)(h(Q),h(X),h(U),h(se))};static \u0275cmp=S({type:a,selectors:[["app-kademe-cikis-modal"]],decls:78,vars:11,consts:[["mat-dialog-title",""],[2,"vertical-align","middle","margin-right","5px","font-size","18px"],[3,"formGroup"],[1,"vehicle-section"],[1,"info-grid"],[1,"info-item"],[1,"label"],[1,"value"],[1,"repair-section"],[1,"form-grid"],[1,"three-columns"],["appearance","outline"],["formControlName","sonuc","required",""],[3,"value",4,"ngFor","ngForOf"],["matSuffix","",2,"font-size","16px"],[4,"ngIf"],["matInput","","type","number","formControlName","yeniKm","required",""],["appearance","outline",1,"full-width"],["matInput","","formControlName","islemAciklama","rows","2","required","","placeholder","Yap\u0131lan bak\u0131m ve onar\u0131m i\u015Flemlerini giriniz..."],["matInput","","formControlName","notlar","rows","1","placeholder","Ek bilgiler..."],[1,"parts-section",2,"padding","8px"],[1,"parts-info"],[1,"hint",2,"font-size","0.8rem"],["align","center"],["mat-raised-button","","color","warn",3,"click"],[2,"font-size","16px"],["mat-raised-button","","color","primary",3,"click","disabled"],[3,"value"]],template:function(e,t){if(e&1&&(r(0,"h2",0)(1,"mat-icon",1),o(2,"build"),i(),o(3,` Kademe \xC7\u0131k\u0131\u015F \u0130\u015Flemi
`),i(),r(4,"mat-dialog-content")(5,"form",2)(6,"div",3)(7,"h3"),o(8,"Ara\xE7 Bilgileri"),i(),r(9,"div",4)(10,"div",5)(11,"span",6),o(12,"Askeri Plaka:"),i(),r(13,"span",7),o(14),i()(),r(15,"div",5)(16,"span",6),o(17,"Sivil Plaka:"),i(),r(18,"span",7),o(19),i()(),r(20,"div",5)(21,"span",6),o(22,"Marka/Model:"),i(),r(23,"span",7),o(24),i()()()(),v(25,"mat-divider"),r(26,"div",8)(27,"h3"),o(28,"\u0130\u015Flem Bilgileri"),i(),r(29,"div",9)(30,"div",10)(31,"mat-form-field",11)(32,"mat-label"),o(33,"Sonu\xE7"),i(),r(34,"mat-select",12),u(35,Si,2,2,"mat-option",13),i(),r(36,"mat-icon",14),o(37,"done_all"),i(),u(38,wi,2,0,"mat-error",15),i(),r(39,"mat-form-field",11)(40,"mat-label"),o(41,"Yeni KM"),i(),v(42,"input",16),r(43,"mat-icon",14),o(44,"speed"),i(),u(45,Fi,2,0,"mat-error",15)(46,Ti,2,0,"mat-error",15),i(),v(47,"div"),i(),r(48,"mat-form-field",17)(49,"mat-label"),o(50,"Yap\u0131lan \u0130\u015Flemler"),i(),v(51,"textarea",18),r(52,"mat-icon",14),o(53,"build"),i(),u(54,Ki,2,0,"mat-error",15),i(),r(55,"mat-form-field",17)(56,"mat-label"),o(57,"Notlar"),i(),v(58,"textarea",19),r(59,"mat-icon",14),o(60,"note"),i()(),r(61,"div",20)(62,"h4")(63,"mat-icon"),o(64,"settings"),i(),o(65," De\u011Fi\u015Fen Par\xE7alar "),i(),r(66,"div",21)(67,"p",22),o(68,"De\u011Fi\u015Fen par\xE7alar i\u015Flem a\xE7\u0131klamas\u0131nda belirtilebilir"),i()()()()()()(),r(69,"mat-dialog-actions",23)(70,"button",24),b("click",function(){return t.onCancel()}),r(71,"mat-icon",25),o(72,"cancel"),i(),o(73," \u0130ptal "),i(),r(74,"button",26),b("click",function(){return t.onSubmit()}),r(75,"mat-icon",25),o(76,"check_circle"),i(),o(77," Tamamla "),i()()),e&2){let l,m,p,c;s(5),d("formGroup",t.kademeCikisForm),s(9),k((t.data.vehicle==null?null:t.data.vehicle.military_plate)||"-"),s(5),k((t.data.vehicle==null?null:t.data.vehicle.civilian_plate)||"-"),s(5),O("",(t.data.vehicle==null?null:t.data.vehicle.brand)||"-"," ",(t.data.vehicle==null?null:t.data.vehicle.model)||"-",""),s(11),d("ngForOf",t.sonuclar),s(3),d("ngIf",(l=t.kademeCikisForm.get("sonuc"))==null?null:l.hasError("required")),s(7),d("ngIf",(m=t.kademeCikisForm.get("yeniKm"))==null?null:m.hasError("required")),s(),d("ngIf",(p=t.kademeCikisForm.get("yeniKm"))==null?null:p.hasError("minKm")),s(8),d("ngIf",(c=t.kademeCikisForm.get("islemAciklama"))==null?null:c.hasError("required")),s(20),d("disabled",t.kademeCikisForm.invalid)}},dependencies:[T,de,F,j,N,G,R,L,z,Le,V,B,A,J,te,ee,D,K,q,$,H,pe,bn,W,Y,fe,Be,Z,ge,ue,Ve,Re],styles:['[_nghost-%COMP%]{display:block;min-width:800px}.vehicle-info[_ngcontent-%COMP%]{margin-bottom:20px;background:#f8fafc;padding:16px;border-radius:8px;box-shadow:0 2px 4px #0000000d}.vehicle-info[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;background:#fff;padding:12px;border-radius:8px;border:1px solid #e0e0e0}.vehicle-info[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;padding:12px;background:#f8fafc;border-radius:6px;border-left:3px solid #1976d2}.vehicle-info[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#1976d2;margin-right:12px;font-weight:500;font-size:.9em;text-transform:uppercase;letter-spacing:.5px}.repair-info[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:20px;padding:20px;background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000000d}.repair-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#2c3e50;font-size:1.2em;margin-bottom:16px;padding-bottom:12px;border-bottom:2px solid #e0e0e0;font-weight:500}.repair-info[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}  .mat-dialog-title{margin-bottom:24px;padding-bottom:16px;color:#1976d2;font-size:1.75em;border-bottom:2px solid #e0e0e0;font-weight:500}  .mat-dialog-actions{padding:16px 24px;margin-bottom:0;background:#f8fafc;border-top:1px solid #e0e0e0;gap:12px}  .mat-dialog-actions button{min-width:120px;padding:8px 24px;font-weight:500}  .mat-dialog-actions button[color=primary]{background-color:#4caf50!important}  .mat-dialog-actions button[color=primary]:hover{background-color:#449d48!important}  .mat-dialog-actions button[color=warn]{background-color:#f44336!important;color:#fff!important}  .mat-dialog-actions button[color=warn]:hover{background-color:#f32c1e!important}  .mat-dialog-content{max-height:70vh;padding:0 24px;margin:0}  .mat-dialog-container{padding:24px;border-radius:8px;background-color:#fff;width:auto!important;overflow-x:hidden!important}  .cdk-overlay-pane{max-width:95vw!important}  .mdc-dialog-title,   .mat-dialog-title{text-align:center!important;color:#ff9800!important;border-bottom:2px solid #ffb74d!important;font-weight:700!important}mat-dialog-content[_ngcontent-%COMP%]{max-height:80vh;padding:16px}h2.mat-dialog-title[_ngcontent-%COMP%]{color:#ff9800;display:flex;align-items:center;margin-bottom:10px;padding-bottom:5px;border-bottom:2px solid #ff9800;font-size:1.2rem}h3[_ngcontent-%COMP%]{color:#333;font-size:1rem;margin-top:8px;margin-bottom:6px;font-weight:500;border-left:4px solid #ff9800;padding-left:6px}h4[_ngcontent-%COMP%]{color:#555;font-size:.9rem;margin-top:6px;margin-bottom:4px;font-weight:500;display:flex;align-items:center}h4[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:6px;color:#ff9800;font-size:16px;width:16px;height:16px}.vehicle-section[_ngcontent-%COMP%], .repair-section[_ngcontent-%COMP%]{margin-bottom:10px;padding:10px;background-color:#fff;border-radius:8px;box-shadow:0 1px 3px #0000001a}.info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:8px}.info-item[_ngcontent-%COMP%]{padding:5px 8px;background-color:#f5f5f5;border-radius:4px;display:flex;flex-direction:column}.label[_ngcontent-%COMP%]{font-size:.75rem;color:#666;margin-bottom:2px;font-weight:500}.value[_ngcontent-%COMP%]{font-size:.9rem;color:#333;font-weight:400}mat-divider[_ngcontent-%COMP%]{margin:8px 0}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:8px}.form-grid[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{width:100%}.form-grid[_ngcontent-%COMP%]   .two-columns[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px}.form-grid[_ngcontent-%COMP%]   .three-columns[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;gap:8px}.parts-section[_ngcontent-%COMP%]{background-color:#f5f5f5;padding:16px;border-radius:8px;border-left:3px solid #ff9800}.parts-section[_ngcontent-%COMP%]   .parts-info[_ngcontent-%COMP%]{margin-top:8px}.parts-section[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%]{margin:0;font-style:italic;color:#666;font-size:.9rem}mat-dialog-actions[_ngcontent-%COMP%]{padding:10px;margin-bottom:0;justify-content:center}mat-dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:120px;display:flex;align-items:center;justify-content:center;gap:8px;margin:0 10px}mat-dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}mat-dialog-actions[_ngcontent-%COMP%]   button[color=primary][_ngcontent-%COMP%]{background-color:#4caf50!important;color:#fff!important}mat-dialog-actions[_ngcontent-%COMP%]   button[color=primary][_ngcontent-%COMP%]:hover:not([disabled]){background-color:#449d48!important}mat-dialog-actions[_ngcontent-%COMP%]   button[color=primary][_ngcontent-%COMP%]:disabled{background-color:#0000001f!important;color:#00000061!important}mat-dialog-actions[_ngcontent-%COMP%]   button[color=warn][_ngcontent-%COMP%]{background-color:#f44336!important;color:#fff!important}mat-dialog-actions[_ngcontent-%COMP%]   button[color=warn][_ngcontent-%COMP%]:hover{background-color:#f32c1e!important}  .mat-form-field-appearance-outline .mat-form-field-outline{color:#bdbdbd}  .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{color:#ff9800}  .mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{color:#f44336}  .mat-select-arrow{color:#ff9800}  .mat-form-field-appearance-outline .mat-form-field-infix{padding:.5em 0}  .mat-form-field-suffix .mat-icon{color:#ff9800}  .mat-mdc-select-panel,   .mat-select-panel{background-color:#fff!important}  .mat-mdc-option,   .mat-option{background-color:#fff!important}  .mat-mdc-option:hover,   .mat-option:hover{background-color:#0000000a!important}  .mat-mdc-option.mdc-list-item--selected,   .mat-mdc-option.mat-selected,   .mat-option.mdc-list-item--selected,   .mat-option.mat-selected{background-color:#ff98001f!important}  textarea.mat-input-element[rows="3"]{min-height:60px}  textarea.mat-input-element[rows="2"]{min-height:40px}  .mat-form-field-wrapper{margin-bottom:0!important;padding-bottom:.8em!important}  .mat-form-field-infix{padding:.4em 0!important}']})};var Di=a=>({"high-priority":a}),Ai=(a,n)=>({active:a,completed:n}),Ii=(a,n,e)=>({success:a,partial:n,failed:e});function Gi(a,n){if(a&1&&(r(0,"div",11)(1,"h4"),o(2,"Notlar"),i(),r(3,"div",19),o(4),i()()),a&2){let e=_();s(4),f(" ",(e.data==null||e.data.maintenance==null?null:e.data.maintenance.notes)||"-"," ")}}function Li(a,n){if(a&1&&(r(0,"div",20)(1,"h3"),o(2,"Onar\u0131m Bilgileri"),i(),r(3,"div",3)(4,"div",4)(5,"span",5),o(6,"Sonu\xE7:"),i(),r(7,"span",21),o(8),i()(),r(9,"div",4)(10,"span",5),o(11,"Tamamlanma Tarihi:"),i(),r(12,"span",6),o(13),I(14,"date"),i()(),r(15,"div",4)(16,"span",5),o(17,"Ger\xE7ekle\u015Fen S\xFCre:"),i(),r(18,"span",6),o(19),i()()(),r(20,"div",11)(21,"h4"),o(22,"Yap\u0131lan \u0130\u015Flem"),i(),r(23,"div",12),o(24),i()()()),a&2){let e=_();s(7),d("ngClass",Ut(8,Ii,(e.data==null||e.data.maintenance==null?null:e.data.maintenance.repair_result)==="Onar\u0131ld\u0131",(e.data==null||e.data.maintenance==null?null:e.data.maintenance.repair_result)==="K\u0131smen Onar\u0131ld\u0131",(e.data==null||e.data.maintenance==null?null:e.data.maintenance.repair_result)==="Onar\u0131lamad\u0131")),s(),f(" ",(e.data==null||e.data.maintenance==null?null:e.data.maintenance.repair_result)||"-"," "),s(5),k(!(e.data==null||e.data.maintenance==null)&&e.data.maintenance.end_date?ce(14,5,e.data==null||e.data.maintenance==null?null:e.data.maintenance.end_date,"dd.MM.yyyy HH:mm"):"-"),s(6),k(e.calculateMaintenanceDuration()),s(5),f(" ",(e.data==null||e.data.maintenance==null?null:e.data.maintenance.repair_description)||"-"," ")}}function zi(a,n){if(a&1){let e=me();r(0,"button",22),b("click",function(){y(e);let l=_();return x(l.print())}),r(1,"mat-icon",17),o(2,"print"),i(),o(3," Yazd\u0131r "),i()}}var We=class a{constructor(n,e){this.dialogRef=n;this.data=e;console.log("Bak\u0131m detaylar\u0131:",e)}close(){this.dialogRef.close()}print(){let n=document.querySelector("mat-dialog-content")?.innerHTML,e=document.body.innerHTML;if(n){let t=window.open("","_blank");t&&(t.document.open(),t.document.write(`
          <html>
            <head>
              <title>Kademe \u0130\u015Flem Detaylar\u0131</title>
              <style>
                body { font-family: Arial, sans-serif; padding: 20px; }
                h2 { color: #ff9800; border-bottom: 2px solid #ff9800; padding-bottom: 10px; }
                h3 { color: #333; font-size: 1rem; border-left: 4px solid #ff9800; padding-left: 6px; }
                .info-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; }
                .info-item { padding: 5px 8px; background-color: #f5f5f5; border-radius: 4px; }
                .label { font-size: 0.75rem; color: #666; font-weight: 500; }
                .value { font-size: 0.9rem; color: #333; }
                .description-box { background-color: #f5f5f5; padding: 8px; border-radius: 4px; margin-top: 5px; }
                @media print {
                  body { margin: 0; padding: 10px; }
                }
              </style>
            </head>
            <body>
              <h2>Kademe \u0130\u015Flem Detaylar\u0131</h2>
              ${n}
            </body>
          </html>
        `),t.document.close(),setTimeout(()=>{t.print()},500))}else window.print()}calculateMaintenanceDuration(){if(!this.data.maintenance.end_date)return"Devam ediyor";let n=new Date(this.data.maintenance.start_date),t=new Date(this.data.maintenance.end_date).getTime()-n.getTime(),l=Math.floor(t/(1e3*60*60*24)),m=Math.floor(t%(1e3*60*60*24)/(1e3*60*60)),p=Math.floor(t%(1e3*60*60)/(1e3*60)),c="";return l>0&&(c+=`${l} g\xFCn `),m>0&&(c+=`${m} saat `),p>0&&(c+=`${p} dakika`),c.trim()||"1 dakikadan az"}static \u0275fac=function(e){return new(e||a)(h(Q),h(X))};static \u0275cmp=S({type:a,selectors:[["app-maintenance-details-modal"]],decls:93,vars:28,consts:[["mat-dialog-title",""],[2,"vertical-align","middle","margin-right","5px","font-size","18px"],[1,"vehicle-section"],[1,"info-grid"],[1,"info-item"],[1,"label"],[1,"value"],[1,"maintenance-section"],[1,"info-grid-3col"],[1,"value","priority",3,"ngClass"],[1,"value","status",3,"ngClass"],[1,"description-section"],[1,"description-box",2,"min-height","auto","padding","4px"],["class","description-section",4,"ngIf"],["class","repair-section",4,"ngIf"],["align","center"],["mat-raised-button","","color","primary",2,"background-color","#ff0000 !important","color","white !important",3,"click"],[2,"font-size","16px"],["mat-raised-button","","style","background-color: #ff9800 !important; color: white !important;",3,"click",4,"ngIf"],[1,"description-box","notes",2,"min-height","auto","padding","4px"],[1,"repair-section"],[1,"value","result",3,"ngClass"],["mat-raised-button","",2,"background-color","#ff9800 !important","color","white !important",3,"click"]],template:function(e,t){e&1&&(r(0,"h2",0)(1,"mat-icon",1),o(2,"build"),i(),o(3,` Kademe \u0130\u015Flem Detaylar\u0131
`),i(),r(4,"mat-dialog-content")(5,"div",2)(6,"h3"),o(7,"Ara\xE7 Bilgileri"),i(),r(8,"div",3)(9,"div",4)(10,"span",5),o(11,"Askeri Plaka:"),i(),r(12,"span",6),o(13),i()(),r(14,"div",4)(15,"span",5),o(16,"Sivil Plaka:"),i(),r(17,"span",6),o(18),i()(),r(19,"div",4)(20,"span",5),o(21,"Marka/Model:"),i(),r(22,"span",6),o(23),i()(),r(24,"div",4)(25,"span",5),o(26,"\u015Easi Numaras\u0131:"),i(),r(27,"span",6),o(28),i()(),r(29,"div",4)(30,"span",5),o(31,"Motor Numaras\u0131:"),i(),r(32,"span",6),o(33),i()(),r(34,"div",4)(35,"span",5),o(36,"Ara\xE7 Cinsi:"),i(),r(37,"span",6),o(38),i()(),r(39,"div",4)(40,"span",5),o(41,"Tahsis Edilen Makam:"),i(),r(42,"span",6),o(43),i()()()(),v(44,"mat-divider"),r(45,"div",7)(46,"h3"),o(47,"Bak\u0131m Bilgileri"),i(),r(48,"div",8)(49,"div",4)(50,"span",5),o(51,"Kay\u0131t Tarihi:"),i(),r(52,"span",6),o(53),I(54,"date"),i()(),r(55,"div",4)(56,"span",5),o(57,"Ar\u0131za T\xFCr\xFC:"),i(),r(58,"span",6),o(59),i()(),r(60,"div",4)(61,"span",5),o(62,"\xD6ncelik:"),i(),r(63,"span",9),o(64),i()(),r(65,"div",4)(66,"span",5),o(67,"Teknisyen:"),i(),r(68,"span",6),o(69),i()(),r(70,"div",4)(71,"span",5),o(72,"Tahmini S\xFCre:"),i(),r(73,"span",6),o(74),i()(),r(75,"div",4)(76,"span",5),o(77,"Durum:"),i(),r(78,"span",10),o(79),i()()(),r(80,"div",11)(81,"h4"),o(82,"Ar\u0131za A\xE7\u0131klamas\u0131"),i(),r(83,"div",12),o(84),i()(),u(85,Gi,5,1,"div",13)(86,Li,25,12,"div",14),i()(),r(87,"mat-dialog-actions",15)(88,"button",16),b("click",function(){return t.close()}),r(89,"mat-icon",17),o(90,"close"),i(),o(91," Kapat "),i(),u(92,zi,4,0,"button",18),i()),e&2&&(s(13),k((t.data==null||t.data.vehicle==null?null:t.data.vehicle.military_plate)||"-"),s(5),k((t.data==null||t.data.vehicle==null?null:t.data.vehicle.civilian_plate)||"-"),s(5),O("",(t.data==null||t.data.vehicle==null?null:t.data.vehicle.brand)||"-"," ",(t.data==null||t.data.vehicle==null?null:t.data.vehicle.model)||"-",""),s(5),k((t.data==null||t.data.vehicle==null?null:t.data.vehicle.chassis_number)||"-"),s(5),k((t.data==null||t.data.vehicle==null?null:t.data.vehicle.engine_number)||"-"),s(5),k((t.data==null||t.data.vehicle==null?null:t.data.vehicle.type)||"-"),s(5),k((t.data==null||t.data.vehicle==null?null:t.data.vehicle.assigned_authority)||"-"),s(10),k(ce(54,20,t.data==null||t.data.maintenance==null?null:t.data.maintenance.created_at,"dd.MM.yyyy HH:mm")),s(6),k((t.data==null||t.data.maintenance==null?null:t.data.maintenance.fault_type)||"-"),s(4),d("ngClass",Fe(23,Di,(t.data==null||t.data.maintenance==null?null:t.data.maintenance.priority)==="Acil")),s(),f(" ",(t.data==null||t.data.maintenance==null?null:t.data.maintenance.priority)||"-"," "),s(5),k((t.data==null||t.data.maintenance==null?null:t.data.maintenance.technician)||"-"),s(5),f("",(t.data==null||t.data.maintenance==null?null:t.data.maintenance.estimated_hours)||"-"," saat"),s(4),d("ngClass",Bt(25,Ai,(t.data==null||t.data.maintenance==null?null:t.data.maintenance.status)==="ACTIVE",(t.data==null||t.data.maintenance==null?null:t.data.maintenance.status)==="COMPLETED")),s(),f(" ",(t.data==null||t.data.maintenance==null?null:t.data.maintenance.status)==="ACTIVE"?"DEVAM ED\u0130YOR":"TAMAMLANDI"," "),s(5),f(" ",(t.data==null||t.data.maintenance==null?null:t.data.maintenance.fault_description)||"-"," "),s(),d("ngIf",t.data==null||t.data.maintenance==null?null:t.data.maintenance.notes),s(),d("ngIf",(t.data==null||t.data.maintenance==null?null:t.data.maintenance.status)==="COMPLETED"),s(6),d("ngIf",(t.data==null||t.data.maintenance==null?null:t.data.maintenance.status)==="COMPLETED"))},dependencies:[T,Te,F,Ke,A,J,te,ee,D,K,Ve,Re,ge,ue],styles:["[_nghost-%COMP%]{display:block;min-width:800px}mat-dialog-content[_ngcontent-%COMP%]{max-height:75vh!important;padding:5px!important;overflow-y:auto!important;overflow-x:hidden!important}h2.mat-dialog-title[_ngcontent-%COMP%]{color:#ff9800;display:flex;align-items:center;margin-bottom:10px;padding-bottom:5px;border-bottom:2px solid #ff9800;font-size:1.2rem}h3[_ngcontent-%COMP%]{color:#333;font-size:1rem;margin-top:8px;margin-bottom:6px;font-weight:500;border-left:4px solid #ff9800;padding-left:6px}h4[_ngcontent-%COMP%]{color:#555;font-size:.9rem;margin-top:6px;margin-bottom:4px;font-weight:500;display:flex;align-items:center}.vehicle-section[_ngcontent-%COMP%], .maintenance-section[_ngcontent-%COMP%], .repair-section[_ngcontent-%COMP%]{margin-bottom:10px;padding:10px;background-color:#fff;border-radius:8px;box-shadow:0 1px 3px #0000001a}.info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:8px}.info-item[_ngcontent-%COMP%]{padding:5px 8px;background-color:#f5f5f5;border-radius:4px;display:flex;flex-direction:column}.label[_ngcontent-%COMP%]{font-size:.75rem;color:#666;margin-bottom:2px;font-weight:500}.value[_ngcontent-%COMP%]{font-size:.9rem;color:#333;font-weight:400}.status[_ngcontent-%COMP%]{font-weight:600;padding:3px 6px;border-radius:4px;display:inline-block;font-size:.85rem;text-align:center}.status.active[_ngcontent-%COMP%]{background-color:#ff9800;color:#fff}.status.completed[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}.description-box[_ngcontent-%COMP%]{padding:5px!important;background-color:#f5f5f5;border-radius:3px;margin-top:2px!important;white-space:pre-line;color:#333;font-size:.8rem!important;max-height:none!important;overflow-y:visible!important}.description-box.notes[_ngcontent-%COMP%]{font-style:italic;background-color:#f0f7ff;border-left:3px solid #2196f3}.high-priority[_ngcontent-%COMP%]{color:#d32f2f;font-weight:500}.result[_ngcontent-%COMP%]{font-weight:600;padding:3px 6px;border-radius:4px;display:inline-block;font-size:.85rem;text-align:center}.result.success[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}.result.partial[_ngcontent-%COMP%]{background-color:#ff9800;color:#fff}.result.failed[_ngcontent-%COMP%]{background-color:#f44336;color:#fff}.parts-section[_ngcontent-%COMP%]{margin-top:16px}.parts-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;margin-top:8px}.part-item[_ngcontent-%COMP%]{padding:6px 12px;background-color:#e0f7fa;border-radius:16px;font-size:.85rem;color:#00838f;border:1px solid #b2ebf2}.no-parts[_ngcontent-%COMP%]{color:#777;font-style:italic;padding:8px;background-color:#f5f5f5;border-radius:4px}mat-divider[_ngcontent-%COMP%]{margin:8px 0}mat-dialog-actions[_ngcontent-%COMP%]{padding:10px;margin-bottom:0;justify-content:center}mat-dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:120px;display:flex;align-items:center;justify-content:center;gap:8px}  .mat-dialog-container{padding:10px!important;width:auto!important;overflow:hidden!important;height:auto!important;max-height:none!important}  .maintenance-detail-dialog .mat-dialog-content{max-height:75vh!important;overflow-y:auto!important;overflow-x:hidden!important}"]})};function Ni(a,n){a&1&&(r(0,"mat-error"),o(1," Geli\u015F KM zorunludur "),i())}function Ri(a,n){a&1&&(r(0,"mat-error"),o(1," Geli\u015F KM, \xE7\u0131k\u0131\u015F KM'den b\xFCy\xFCk olmal\u0131d\u0131r "),i())}function Vi(a,n){a&1&&(r(0,"mat-error"),o(1," D\xFCzenleme nedeni zorunludur "),i())}var Ze=class a{constructor(n,e,t){this.fb=n;this.dialogRef=e;this.data=t;this.kmForm=this.fb.group({endKm:[t.task.end_km,[g.required,g.min(t.task.start_km+1)]],reason:["",g.required]}),this.dialogRef.addPanelClass("a11y-dialog")}kmForm;ngOnInit(){}save(){this.kmForm.valid&&this.dialogRef.close({taskId:this.data.task.id,endKm:this.kmForm.value.endKm,reason:this.kmForm.value.reason})}static \u0275fac=function(e){return new(e||a)(h(U),h(Q),h(X))};static \u0275cmp=S({type:a,selectors:[["app-km-edit-modal"]],decls:33,vars:12,consts:[["mat-dialog-title","","id","km-edit-dialog-title"],["cdkTrapFocus","",3,"cdkTrapFocusAutoCapture"],[3,"formGroup"],[1,"form-container"],["appearance","outline",1,"full-width"],["matInput","","type","number","formControlName","endKm","placeholder","Geli\u015F KM bilgisini giriniz","aria-label","Geli\u015F KM de\u011Feri"],[4,"ngIf"],["matInput","","rows","2","formControlName","reason","placeholder","Neden KM bilgisi de\u011Fi\u015Ftiriliyor?","aria-label","D\xFCzenleme nedeni"],["align","end"],["mat-button","","mat-dialog-close",""],["mat-raised-button","","color","primary",3,"click","disabled"]],template:function(e,t){if(e&1&&(r(0,"h2",0),o(1,"KM Bilgisi D\xFCzenle"),i(),r(2,"mat-dialog-content",1)(3,"form",2)(4,"div",3)(5,"p")(6,"strong"),o(7,"Ara\xE7:"),i(),o(8),i(),r(9,"p")(10,"strong"),o(11,"G\xF6rev:"),i(),o(12),i(),r(13,"p")(14,"strong"),o(15,"\xC7\u0131k\u0131\u015F KM:"),i(),o(16),i(),r(17,"mat-form-field",4)(18,"mat-label"),o(19,"Geli\u015F KM"),i(),v(20,"input",5),u(21,Ni,2,0,"mat-error",6)(22,Ri,2,0,"mat-error",6),i(),r(23,"mat-form-field",4)(24,"mat-label"),o(25,"D\xFCzenleme Nedeni"),i(),v(26,"textarea",7),u(27,Vi,2,0,"mat-error",6),i()()()(),r(28,"mat-dialog-actions",8)(29,"button",9),o(30,"\u0130ptal"),i(),r(31,"button",10),b("click",function(){return t.save()}),o(32,"Kaydet"),i()()),e&2){let l,m,p;s(2),d("cdkTrapFocusAutoCapture",!0),s(),d("formGroup",t.kmForm),s(5),Vt(" ",t.data.vehicle.military_plate," (",t.data.vehicle.brand," ",t.data.vehicle.model,") "),s(4),O(" ",t.data.task.task_paper_no," - ",t.data.task.route_description," "),s(4),f(" ",t.data.task.start_km," "),s(5),d("ngIf",(l=t.kmForm.get("endKm"))==null?null:l.hasError("required")),s(),d("ngIf",(m=t.kmForm.get("endKm"))==null?null:m.hasError("min")),s(5),d("ngIf",(p=t.kmForm.get("reason"))==null?null:p.hasError("required")),s(4),d("disabled",t.kmForm.invalid)}},dependencies:[T,F,A,Kn,J,te,ee,q,$,H,pe,W,Y,D,K,j,N,G,R,L,z,V,B,nn,tn],styles:[".form-container[_ngcontent-%COMP%]{min-width:350px}.full-width[_ngcontent-%COMP%]{width:100%}"]})};var Qe=class a{constructor(n){this.http=n}apiUrl="http://localhost:3000/api/personnel";savePersonnel(n){return this.http.post(this.apiUrl,{name:n.name,rank:n.rank}).pipe(ke(e=>(console.error("Save Error:",e),be(()=>new Error("Kay\u0131t s\u0131ras\u0131nda bir hata olu\u015Ftu")))))}getPersonnel(){return this.http.get(this.apiUrl)}toggleVisibility(n,e){return this.http.put(`${this.apiUrl}/${n}/visibility`,{visibility:e}).pipe(ke(t=>(console.error("Visibility Update Error:",t),be(()=>new Error("G\xF6r\xFCn\xFCrl\xFCk g\xFCncellenirken hata olu\u015Ftu")))))}updateVisibility(n,e){return this.http.put(`${this.apiUrl}/${n}/visibility`,{visibility:e})}updatePersonnel(n,e){return this.http.put(`${this.apiUrl}/${n}`,e).pipe(ke(t=>(console.error("Update Error:",t),be(()=>new Error("G\xFCncelleme s\u0131ras\u0131nda bir hata olu\u015Ftu")))))}checkExisting(n,e){return this.http.get(`${this.apiUrl}/check?name=${n}&rank=${e}`).pipe(ke(t=>(console.error("Check Error:",t),be(()=>new Error("Kontrol s\u0131ras\u0131nda bir hata olu\u015Ftu")))))}static \u0275fac=function(e){return new(e||a)(Et(Yt))};static \u0275prov=Ot({token:a,factory:a.\u0275fac,providedIn:"root"})};var Ui=a=>({"background-color":a,color:"white"}),ji=(a,n,e,t,l)=>({kapali:a,acik:n,kademede:e,"uzun-yol":t,"uzun-yol-closed":l}),Hi=(a,n,e,t)=>({"row-uzun-yol":a,"row-acik":n,"row-kapali":e,"row-kademede":t});function $i(a,n){if(a&1&&(r(0,"div",5)(1,"mat-icon"),o(2,"error"),i(),r(3,"span"),o(4),i(),r(5,"p"),o(6,"Ana sayfaya y\xF6nlendiriliyorsunuz..."),i()()),a&2){let e=_();s(4),k(e.errorMessage)}}function qi(a,n){if(a&1&&(r(0,"mat-option",36),o(1),i()),a&2){let e=n.$implicit;d("value",e),s(),O(" ",e.rutbe," - ",e.name," ")}}function Yi(a,n){if(a&1&&(r(0,"mat-hint"),o(1),i()),a&2){let e=_(2);s(),f(" ",e.isKademeMode()?"Kademe i\u015Flemi s\u0131ras\u0131nda de\u011Fi\u015Ftirilemez":"Aktif g\xF6revde s\xFCr\xFCc\xFC de\u011Fi\u015Ftirilemez"," ")}}function Wi(a,n){if(a&1&&(r(0,"mat-option",36),o(1),i()),a&2){let e=n.$implicit;d("value",e),s(),O(" ",e.rank," - ",e.name," ")}}function Zi(a,n){if(a&1&&(r(0,"mat-hint"),o(1),i()),a&2){let e=_(2);s(),f(" ",e.isKademeMode()?"Kademe i\u015Flemi s\u0131ras\u0131nda de\u011Fi\u015Ftirilemez":"Aktif g\xF6revde makam de\u011Fi\u015Ftirilemez"," ")}}function Qi(a,n){a&1&&(r(0,"mat-hint"),o(1,"Kademe i\u015Flemi s\u0131ras\u0131nda de\u011Fi\u015Ftirilemez"),i())}function Xi(a,n){a&1&&(r(0,"mat-hint"),o(1,"Kademe i\u015Flemi s\u0131ras\u0131nda de\u011Fi\u015Ftirilemez"),i())}function Ji(a,n){a&1&&(r(0,"mat-hint"),o(1,"Kademe i\u015Flemi s\u0131ras\u0131nda de\u011Fi\u015Ftirilemez"),i())}function ea(a,n){if(a&1&&(r(0,"mat-hint"),o(1),i()),a&2){let e=_(2);s(),f(" ",e.isKademeMode()?"Kademe i\u015Flemi s\u0131ras\u0131nda de\u011Fi\u015Ftirilemez":"Aktif g\xF6revde \xE7\u0131k\u0131\u015F KM de\u011Fi\u015Ftirilemez"," ")}}function ta(a,n){if(a&1&&(r(0,"mat-hint"),o(1),i()),a&2){let e=_(2);s(),f(" ",e.isKademeMode()?"Kademe i\u015Flemi s\u0131ras\u0131nda de\u011Fi\u015Ftirilemez":"G\xF6rev kapatmak i\xE7in geli\u015F KM'sini giriniz"," ")}}function na(a,n){a&1&&(r(0,"mat-hint"),o(1,"Geli\u015F KM sadece g\xF6rev kapat\u0131l\u0131rken girilebilir"),i())}function ia(a,n){if(a&1&&(r(0,"mat-hint"),o(1),i()),a&2){let e=_(2);s(),f(" ",e.isKademeMode()?"Kademe i\u015Flemi s\u0131ras\u0131nda de\u011Fi\u015Ftirilemez":"G\xF6rev ile ilgili d\xF6n\xFC\u015F notlar\u0131n\u0131 girebilirsiniz"," ")}}function aa(a,n){if(a&1&&(r(0,"mat-hint",37),o(1),i()),a&2){let e,t=_(2);s(),f("",((e=t.gorevForm.get("donusMesaji"))==null||e.value==null?null:e.value.length)||0,"/200")}}function oa(a,n){a&1&&(r(0,"th",54),o(1," \xC7\u0131k\u0131\u015F Tarih"),i())}function ra(a,n){if(a&1&&(r(0,"td",55),o(1),I(2,"date"),i()),a&2){let e=n.$implicit;s(),k(ce(2,1,e.created_at,"dd.MM.yyyy HH:mm"))}}function la(a,n){a&1&&(r(0,"th",54),o(1,"Durum"),i())}function sa(a,n){if(a&1&&(r(0,"small",59),o(1),i()),a&2){let e=_().$implicit;s(),f(" ",e.task_type==="UZUN_YOL"?"(Uzun Yol)":""," ")}}function ma(a,n){if(a&1&&(r(0,"td",55)(1,"div",56)(2,"span",57),o(3),i(),u(4,sa,2,1,"small",58),i()()),a&2){let e=n.$implicit,t=_(3);s(2),d("ngClass",Ht(3,ji,e.task_status==="KAPALI"&&e.task_type!=="UZUN_YOL",e.task_status==="ACIK",e.task_status==="KADEMEDE",e.task_status==="UZUN_YOL",t.isUzunYolClosed(e))),s(),f(" ",e.task_status," "),s(),d("ngIf",e.task_type)}}function ca(a,n){a&1&&(r(0,"th",54),o(1,"Bak\u0131m"),i())}function da(a,n){if(a&1){let e=me();r(0,"button",63),b("click",function(l){y(e);let m=_().$implicit;return _(3).showMaintenanceDetails(m),x(l.stopPropagation())}),r(1,"mat-icon"),o(2,"build"),i()()}}function pa(a,n){a&1&&(r(0,"span",64),o(1,"-"),i())}function ua(a,n){if(a&1&&(r(0,"td",60),u(1,da,3,0,"button",61)(2,pa,2,0,"span",62),i()),a&2){let e=n.$implicit;s(),d("ngIf",e.maintenance_id),s(),d("ngIf",!e.maintenance_id)}}function ga(a,n){a&1&&(r(0,"th",54),o(1,"S\xFCr\xFCc\xFC"),i())}function fa(a,n){if(a&1&&(r(0,"td",55),o(1),i()),a&2){let e=n.$implicit;s(),O(" ",e.driver_name," (",e.driver_rank,") ")}}function _a(a,n){a&1&&(r(0,"th",54),o(1,"Yolcu"),i())}function ha(a,n){if(a&1&&(r(0,"td",55),o(1),v(2,"br"),o(3," Emrinde Gidilen"),r(4,"strong"),o(5),i()()),a&2){let e=n.$implicit;s(),O(" Tahsisli Makam ",e.authority_name," (",e.authority_rank,")"),s(4),k(e.ordered_by)}}function va(a,n){a&1&&(r(0,"th",54),o(1,"G\xF6rev Detay\u0131"),i())}function ba(a,n){if(a&1&&(r(0,"td",55)(1,"strong"),o(2,"Ka\u011F\u0131t No:"),i(),o(3),v(4,"br"),r(5,"strong"),o(6,"G\xFCzergah:"),i(),o(7),i()),a&2){let e=n.$implicit;s(3),f(" ",e.task_paper_no,""),s(4),f(" ",e.route_description," ")}}function ka(a,n){a&1&&(r(0,"th",54),o(1,"D\xF6n\xFC\u015F Mesaj\u0131"),i())}function Ca(a,n){if(a&1&&(r(0,"td",55),o(1),i()),a&2){let e=n.$implicit;s(),f(" ",e.return_message||"-"," ")}}function Ma(a,n){a&1&&(r(0,"th",54),o(1,"KM Bilgisi"),i())}function ya(a,n){if(a&1&&(r(0,"span"),o(1),v(2,"br"),r(3,"strong"),o(4),i()()),a&2){let e=_().$implicit;s(),f(" Geli\u015F: ",e.end_km," "),s(3),f("(",e.end_km-e.start_km," KM)")}}function xa(a,n){a&1&&(r(0,"span"),o(1,"Devam Ediyor"),i())}function Oa(a,n){if(a&1&&(r(0,"td",55)(1,"span"),o(2),i(),v(3,"br"),u(4,ya,5,2,"span",18)(5,xa,2,0,"span",18),i()),a&2){let e=n.$implicit;s(2),f("\xC7\u0131k\u0131\u015F: ",e.start_km,""),s(2),d("ngIf",e.end_km),s(),d("ngIf",!e.end_km)}}function Pa(a,n){a&1&&(r(0,"th",54),o(1,"Kapatma Tarihi / S\xFCre"),i())}function Ea(a,n){if(a&1&&(P(0),o(1),I(2,"date"),v(3,"br"),r(4,"small")(5,"strong"),o(6,"S\xFCre:"),i(),o(7),i(),E()),a&2){let e=_().$implicit,t=_(3);s(),f(" ",ce(2,2,e.end_date,"dd.MM.yyyy HH:mm"),""),s(6),f(" ",t.calculateTaskDuration(e.start_date,e.end_date)," ")}}function Sa(a,n){a&1&&(P(0),o(1,"-"),E())}function wa(a,n){if(a&1&&(r(0,"td",55),u(1,Ea,8,5,"ng-container",18)(2,Sa,2,0,"ng-container",18),i()),a&2){let e=n.$implicit;s(),d("ngIf",e.end_date),s(),d("ngIf",!e.end_date)}}function Fa(a,n){a&1&&(r(0,"th",54),o(1,"\u0130\u015Flemler"),i())}function Ta(a,n){if(a&1){let e=me();r(0,"button",66),b("click",function(){y(e);let l=_().$implicit,m=_(3);return x(m.openKmEditDialog(l))}),r(1,"mat-icon"),o(2,"edit"),i()()}}function Ka(a,n){if(a&1&&(r(0,"td",55),u(1,Ta,3,0,"button",65),i()),a&2){let e=n.$implicit,t=_(3);s(),d("ngIf",t.isAdmin&&e.task_status==="KAPALI"&&t.isLastClosedTask(e)&&t.isVehicleAvailable())}}function Da(a,n){a&1&&v(0,"tr",67)}function Aa(a,n){if(a&1&&v(0,"tr",68),a&2){let e=n.$implicit;d("ngClass",jt(1,Hi,e.task_type==="UZUN_YOL",e.task_status==="ACIK"&&e.task_type!=="UZUN_YOL",e.task_status==="KAPALI"&&e.task_type!=="UZUN_YOL",e.task_status==="KADEMEDE"))}}function Ia(a,n){if(a&1&&(r(0,"table",38),P(1,39),u(2,oa,2,0,"th",40)(3,ra,3,4,"td",41),E(),P(4,42),u(5,la,2,0,"th",40)(6,ma,5,9,"td",41),E(),P(7,43),u(8,ca,2,0,"th",40)(9,ua,3,2,"td",44),E(),P(10,45),u(11,ga,2,0,"th",40)(12,fa,2,2,"td",41),E(),P(13,46),u(14,_a,2,0,"th",40)(15,ha,6,3,"td",41),E(),P(16,47),u(17,va,2,0,"th",40)(18,ba,8,2,"td",41),E(),P(19,48),u(20,ka,2,0,"th",40)(21,Ca,2,1,"td",41),E(),P(22,49),u(23,Ma,2,0,"th",40)(24,Oa,6,3,"td",41),E(),P(25,50),u(26,Pa,2,0,"th",40)(27,wa,3,2,"td",41),E(),P(28,51),u(29,Fa,2,0,"th",40)(30,Ka,2,1,"td",41),E(),u(31,Da,1,0,"tr",52)(32,Aa,1,6,"tr",53),i()),a&2){let e=_(2);d("dataSource",e.taskHistory),s(31),d("matHeaderRowDef",e.displayedColumns),s(),d("matRowDefColumns",e.displayedColumns)}}function Ga(a,n){a&1&&(r(0,"div",69),o(1," Bu araca ait g\xF6rev kayd\u0131 bulunmamaktad\u0131r. "),i())}function La(a,n){if(a&1){let e=me();r(0,"div",6)(1,"div",7)(2,"div",8)(3,"h2"),o(4,"\u{1F697} Ara\xE7 G\xF6rev Kayd\u0131"),i(),r(5,"mat-chip-set")(6,"mat-chip",9),o(7),i()()(),r(8,"div",10)(9,"p")(10,"strong"),o(11,"Askeri Plaka"),i(),o(12),i(),r(13,"p")(14,"strong"),o(15,"Sivil Plaka"),i(),o(16),i(),r(17,"p")(18,"strong"),o(19,"Marka/Model"),i(),o(20),i(),r(21,"p")(22,"strong"),o(23,"Ara\xE7 Tipi"),i(),o(24),i(),r(25,"p")(26,"strong"),o(27,"Tahsis"),i(),o(28),i()()(),r(29,"form",11),b("ngSubmit",function(){y(e);let l=_();return x(l.onSubmit())}),r(30,"div",12)(31,"mat-form-field",13)(32,"mat-label"),o(33,"Ara\xE7 Plakas\u0131"),i(),v(34,"input",14),i(),r(35,"mat-form-field",13)(36,"mat-label"),o(37,"S\xFCr\xFCc\xFC"),i(),v(38,"input",15),r(39,"mat-autocomplete",16,0),b("optionSelected",function(l){y(e);let m=_();return x(m.onDriverSelected(l))}),u(41,qi,2,3,"mat-option",17),I(42,"async"),i(),u(43,Yi,2,1,"mat-hint",18),i(),r(44,"mat-form-field",13)(45,"mat-label"),o(46,"Tahsisli Makam"),i(),v(47,"input",19),r(48,"mat-autocomplete",16,1),b("optionSelected",function(l){y(e);let m=_();return x(m.onPersonnelSelected(l))}),u(50,Wi,2,3,"mat-option",17),I(51,"async"),i(),u(52,Zi,2,1,"mat-hint",18),i(),r(53,"mat-form-field",13)(54,"mat-label"),o(55,"Emriden Gidilecek \u015Eah\u0131s"),i(),r(56,"input",20),b("input",function(l){y(e);let m=_();return x(m.toUpperCase(l))})("keypress",function(l){y(e);let m=_();return x(m.onlyLetters(l))}),i(),u(57,Qi,2,0,"mat-hint",18),i(),r(58,"mat-form-field",13)(59,"mat-label"),o(60,"G\xF6rev Ka\u011F\u0131t No"),i(),v(61,"input",21),u(62,Xi,2,0,"mat-hint",18),i(),r(63,"mat-form-field",13)(64,"mat-label"),o(65,"Gidilen G\xFCzergah"),i(),v(66,"textarea",22),u(67,Ji,2,0,"mat-hint",18),i(),r(68,"mat-form-field",13)(69,"mat-label"),o(70,"\xC7\u0131k\u0131\u015F KM"),i(),v(71,"input",23),u(72,ea,2,1,"mat-hint",18),i(),r(73,"mat-form-field",13)(74,"mat-label"),o(75,"Geli\u015F KM"),i(),v(76,"input",24),u(77,ta,2,1,"mat-hint",18)(78,na,2,0,"mat-hint",18),i(),r(79,"mat-form-field",25)(80,"mat-label"),o(81,"D\xF6n\xFC\u015F Mesaj\u0131"),i(),r(82,"textarea",26),o(83,"          "),i(),u(84,ia,2,1,"mat-hint",18)(85,aa,2,1,"mat-hint",27),i()(),r(86,"div",28)(87,"button",29),b("click",function(){y(e);let l=_();return x(l.gorevAc())}),r(88,"mat-icon"),o(89,"play_arrow"),i(),o(90," G\xF6rev A\xE7 "),i(),r(91,"button",30),b("click",function(){y(e);let l=_();return x(l.uzunYol())}),r(92,"mat-icon"),o(93,"alt_route"),i(),o(94," Uzun Yol "),i(),r(95,"button",31),b("click",function(){y(e);let l=_();return x(l.gorevKapat())}),r(96,"mat-icon"),o(97,"stop"),i(),o(98," G\xF6rev Kapat "),i(),r(99,"button",32),b("click",function(){y(e);let l=_();return x(l.kademeGiris())}),r(100,"mat-icon"),o(101,"engineering"),i(),o(102," Kademe Giri\u015F "),i(),r(103,"button",32),b("click",function(){y(e);let l=_();return x(l.kademeCikis())}),r(104,"mat-icon"),o(105,"exit_to_app"),i(),o(106," Kademe \xC7\u0131k\u0131\u015F "),i()(),r(107,"div",33)(108,"h3"),o(109,"Ara\xE7 G\xF6rev Ge\xE7mi\u015Fi"),i(),u(110,Ia,33,3,"table",34)(111,Ga,2,0,"div",35),i()()()}if(a&2){let e,t,l,m=rt(40),p=rt(49),c=_();s(6),d("ngStyle",Fe(51,Ui,c.getStatusColor())),s(),f(" G\xF6rev Durumu: ",c.gorevDurumu," "),s(5),f(" ",c.vehicle.military_plate,""),s(4),f(" ",c.vehicle.civilian_plate,""),s(4),O(" ",c.vehicle.brand," ",c.vehicle.model,""),s(4),f(" ",c.vehicle.type,""),s(4),f(" ",c.vehicle.assigned_authority,""),s(),d("formGroup",c.gorevForm),s(5),d("value",c.vehicle==null?null:c.vehicle.military_plate),s(4),d("formControl",c.driverSearchControl)("disabled",c.isKademeMode())("matAutocomplete",m),s(),d("displayWith",c.displayDriverFn),s(2),d("ngForOf",st(42,47,c.filteredDrivers$)),s(2),d("ngIf",c.activeTask),s(4),d("formControl",c.personnelSearchControl)("readonly",!!c.activeTask||c.isKademeMode())("disabled",!!c.activeTask||c.isKademeMode())("matAutocomplete",p),s(),d("displayWith",c.displayPersonnelFn),s(2),d("ngForOf",st(51,49,c.filteredPersonnel$)),s(2),d("ngIf",c.activeTask),s(4),d("disabled",c.isKademeMode()),s(),d("ngIf",c.isKademeMode()),s(4),d("disabled",c.isKademeMode()),s(),d("ngIf",c.isKademeMode()),s(4),d("disabled",c.isKademeMode()),s(),d("ngIf",c.isKademeMode()),s(4),d("disabled",((e=c.gorevForm.get("cikisKm"))==null?null:e.disabled)||c.isKademeMode())("placeholder",(t=c.gorevForm.get("cikisKm"))!=null&&t.disabled?"\xD6nceki g\xF6revden otomatik al\u0131nd\u0131":"\xC7\u0131k\u0131\u015F KM giriniz"),s(),d("ngIf",c.activeTask),s(4),d("disabled",c.isKademeMode())("placeholder",c.activeTask?"Geli\u015F KM giriniz":"G\xF6rev kapat\u0131l\u0131rken girilebilir"),s(),d("ngIf",c.activeTask),s(),d("ngIf",!c.activeTask),s(4),d("disabled",c.isKademeMode())("placeholder",c.activeTask?"D\xF6n\xFC\u015F mesaj\u0131n\u0131z\u0131 giriniz":"\xD6nce g\xF6rev a\xE7mal\u0131s\u0131n\u0131z"),s(2),d("ngIf",c.activeTask),s(),d("ngIf",!c.isKademeMode()),s(2),d("disabled",c.gorevDurumu===c.GorevDurumu.ACIK||c.gorevDurumu===c.GorevDurumu.UZUN_YOL||c.gorevDurumu===c.GorevDurumu.KADEMEDE||c.activeTask||!c.gorevForm.valid),s(4),d("disabled",c.gorevDurumu===c.GorevDurumu.ACIK||c.gorevDurumu===c.GorevDurumu.UZUN_YOL||c.gorevDurumu===c.GorevDurumu.KADEMEDE||c.activeTask||!c.gorevForm.valid),s(4),d("disabled",c.gorevDurumu===c.GorevDurumu.KAPALI||!c.activeTask||!((l=c.gorevForm.get("gelisKm"))!=null&&l.value)||((l=c.gorevForm.get("gelisKm"))==null?null:l.value)<=((l=c.gorevForm.get("cikisKm"))==null?null:l.value)),s(4),d("disabled",!c.canEnterMaintenance()),s(4),d("disabled",!c.isGorevDurumu(c.GorevDurumu.KADEMEDE)||!c.activeTask),s(7),d("ngIf",c.taskHistory.length>0),s(),d("ngIf",c.taskHistory.length===0)}}var oi=(l=>(l.KAPALI="KAPALI",l.ACIK="ACIK",l.KADEMEDE="KADEMEDE",l.UZUN_YOL="UZUN_YOL",l))(oi||{}),ai=class a{constructor(n,e,t,l,m,p,c,M,w,Xe,Pe){this.route=n;this.router=e;this.snackBar=t;this.fb=l;this.vehicleService=m;this.driverService=p;this.personnelService=c;this.taskService=M;this.dialog=w;this.logService=Xe;this.authService=Pe;this.gorevForm=this.fb.group({aracPlakasi:[{value:"",disabled:!0}],surucu:[{value:"",disabled:!1},g.required],tahsisliMakam:[{value:"",disabled:!1},g.required],emirVeren:[{value:"",disabled:!1},g.required],donusMesaji:[{value:"",disabled:!1},[g.maxLength(200)]],cikisKm:[{value:"",disabled:!1},[g.required,g.min(0)]],gelisKm:[{value:"",disabled:!1},[g.min(0)]],gorevKagitNo:[{value:"",disabled:!1},[g.required,g.maxLength(15)]],gidilenGuzergah:[{value:"",disabled:!1},[g.required,g.maxLength(25)]],baslangicTarihi:[{value:"",disabled:!0}],bitisTarihi:[{value:"",disabled:!1}],gorevDurumu:[{value:"KAPALI",disabled:!0}]}),this.loadDrivers(),this.loadPersonnel(),this.filteredDrivers$=this.driverSearchControl.valueChanges.pipe(ie(""),Ce(this.destroy$),ne(Je=>this._filterDrivers(Je||""))),this.filteredPersonnel$=this.personnelSearchControl.valueChanges.pipe(ie(""),Ce(this.destroy$),ne(Je=>this._filterPersonnel(Je||"")));let he=this.authService.getCurrentUser();this.isAdmin=he?.role==="admin"}GorevDurumu=oi;vehicleId=null;vehicle=null;gorevForm;drivers=[];personnel=[];gorevDurumu="KAPALI";hasError=!1;errorMessage="";taskHistory=[];activeTask=null;displayedColumns=["created_at","task_status","driver_info","authority_info","task_info","return_message","km_info","end_date","maintenance_details","actions"];driverSearchControl=new Oe("");personnelSearchControl=new Oe("");filteredDrivers$;filteredPersonnel$;destroy$=new ve;wheelHandler=()=>{};isAdmin=!1;_filterDrivers(n){if(!n||typeof n=="object")return this.drivers;let e=n.toLowerCase();return this.drivers.filter(t=>t?.name?.toLowerCase().includes(e)||t?.rutbe?.toLowerCase().includes(e))}_filterPersonnel(n){if(!n||typeof n=="object")return this.personnel;let e=n.toLowerCase();return this.personnel.filter(t=>t?.name?.toLowerCase().includes(e)||t?.rank?.toLowerCase().includes(e))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.wheelHandler&&document.removeEventListener("wheel",this.wheelHandler)}initializeFormControls(){this.gorevForm=this.fb.group({aracPlakasi:[{value:"",disabled:!0}],surucu:["",g.required],tahsisliMakam:["",g.required],emirVeren:["",g.required],donusMesaji:[""],cikisKm:["",[g.required,g.min(0)]],gelisKm:["",[g.min(0)]],gorevKagitNo:["",g.required],gidilenGuzergah:["",g.required],baslangicTarihi:[{value:"",disabled:!0}],bitisTarihi:[""],gorevDurumu:[{value:"KAPALI",disabled:!0}]}),this.driverSearchControl=new Oe(""),this.personnelSearchControl=new Oe(""),this.driverSearchControl.valueChanges.pipe(ie(""),Ce(this.destroy$),ne(n=>this._filterDrivers(n||""))).subscribe(n=>{this.filteredDrivers$=new le(e=>e.next(n))}),this.personnelSearchControl.valueChanges.pipe(ie(""),Ce(this.destroy$),ne(n=>this._filterPersonnel(n||""))).subscribe(n=>{this.filteredPersonnel$=new le(e=>e.next(n))}),this.loadDrivers(),this.loadPersonnel()}onDriverKeydown(n){n.key==="Enter"&&this.filteredDrivers$&&this.filteredDrivers$.subscribe(e=>{if(e.length===1){this.gorevForm.patchValue({surucu:e[0].id});let t=document.querySelector('input[formControlName="tahsisliMakam"]');t&&t.focus()}})}onPersonnelKeydown(n){n.key==="Enter"&&this.filteredPersonnel$&&this.filteredPersonnel$.subscribe(e=>{if(e.length===1){this.gorevForm.patchValue({tahsisliMakam:e[0].id});let t=document.querySelector('input[formControlName="emirVeren"]');t&&t.focus()}})}updateFormControlsState(){this.isKademeMode()?(this.driverSearchControl.disable(),this.personnelSearchControl.disable(),this.gorevForm.disable()):this.activeTask?(this.gorevForm.get("aracPlakasi")?.disable(),this.gorevForm.get("surucu")?.disable(),this.gorevForm.get("tahsisliMakam")?.disable(),this.gorevForm.get("emirVeren")?.disable(),this.gorevForm.get("cikisKm")?.disable(),this.gorevForm.get("gorevKagitNo")?.disable(),this.gorevForm.get("gidilenGuzergah")?.disable(),this.gorevForm.get("baslangicTarihi")?.disable(),this.driverSearchControl.disable(),this.personnelSearchControl.disable()):(this.gorevForm.enable(),this.driverSearchControl.enable(),this.personnelSearchControl.enable(),this.gorevForm.get("aracPlakasi")?.disable(),this.gorevForm.get("baslangicTarihi")?.disable(),this.gorevForm.get("gorevDurumu")?.disable())}isKademeMode(){return this.gorevDurumu==="KADEMEDE"}ngOnInit(){document.addEventListener("wheel",this.wheelHandler,{passive:!0}),this.vehicleId=this.route.snapshot.paramMap.get("id"),this.vehicleId&&(this.loadVehicleDetails(this.vehicleId),this.loadTaskHistory())}loadTaskHistory(){this.vehicleId&&this.taskService.getAllTasksByVehicleId(Number(this.vehicleId)).subscribe({next:n=>vt(this,null,function*(){if(console.log("Y\xFCklenen t\xFCm g\xF6revler:",n),this.taskHistory=n,this.activeTask=n.find(t=>["ACIK","KADEMEDE","UZUN_YOL"].includes(t.task_status))||null,this.activeTask){yield Promise.all([new Promise(m=>{this.driverService.getDrivers().subscribe(p=>{this.drivers=p,m()})}),new Promise(m=>{this.personnelService.getPersonnel().subscribe(p=>{this.personnel=p,m()})})]);let t=this.drivers.find(m=>m.id===this.activeTask?.driver_id),l=this.personnel.find(m=>m.id===this.activeTask?.assigned_authority_id);t&&(this.driverSearchControl.setValue(t),this.gorevForm.patchValue({surucu:t.id})),l&&(this.personnelSearchControl.setValue(l),this.gorevForm.patchValue({tahsisliMakam:l.id})),this.gorevForm.patchValue({emirVeren:this.activeTask?.ordered_by,cikisKm:this.activeTask?.start_km,gorevKagitNo:this.activeTask?.task_paper_no,gidilenGuzergah:this.activeTask?.route_description,donusMesaji:this.activeTask?.return_message||"",gelisKm:this.activeTask?.end_km||""}),this.gorevForm.get("surucu")?.disable(),this.gorevForm.get("tahsisliMakam")?.disable(),this.gorevForm.get("emirVeren")?.disable(),this.gorevForm.get("cikisKm")?.disable(),this.gorevForm.get("gorevKagitNo")?.disable(),this.gorevForm.get("gidilenGuzergah")?.disable(),this.gorevDurumu=this.activeTask.task_status,this.updateFormControlsState()}let e=n.find(t=>t.task_status==="KAPALI");e&&!this.activeTask&&(this.gorevForm.patchValue({cikisKm:e.end_km}),this.gorevForm.get("cikisKm")?.disable()),console.log("G\xF6rev ge\xE7mi\u015Fi y\xFCklendi:",n),console.log("Aktif g\xF6rev:",this.activeTask)}),error:n=>{console.error("G\xF6rev ge\xE7mi\u015Fi y\xFCklenirken hata:",n),this.snackBar.open("G\xF6rev ge\xE7mi\u015Fi y\xFCklenirken hata olu\u015Ftu","Kapat",{duration:3e3,panelClass:["error-snackbar"]})}})}loadVehicleDetails(n){this.vehicleService.getVehicleById(n).subscribe({next:e=>{if(!e){this.handleError("Ara\xE7 bulunamad\u0131");return}console.log("Gelen ara\xE7 detaylar\u0131:",e),this.vehicle=re(oe({},e),{militaryPlate:e.military_plate,civilianPlate:e.civilian_plate}),this.gorevForm.patchValue({aracPlakasi:e.military_plate}),this.hasError=!1},error:e=>{console.error("Ara\xE7 detay hatas\u0131:",e),this.handleError(e.message||"Ara\xE7 detaylar\u0131 y\xFCklenirken hata olu\u015Ftu")}})}loadDrivers(){this.driverService.getDrivers().subscribe({next:n=>{this.drivers=n.filter(e=>e.visibility===0)},error:n=>{console.error("S\xFCr\xFCc\xFCler y\xFCklenirken hata:",n)}})}loadPersonnel(){this.personnelService.getPersonnel().subscribe({next:n=>{this.personnel=n.filter(e=>e.visibility===0)},error:n=>{console.error("Personel y\xFCklenirken hata:",n)}})}getVehicleId(){return this.vehicleId?parseInt(this.vehicleId,10):0}getActiveTaskId(){return this.activeTask?.id||0}createTaskLog(n){let e=this.authService.getCurrentUser()?.id;if(!e){console.error("Kullan\u0131c\u0131 ID bulunamad\u0131");return}let t=this.getVehicleId();if(!t){console.error("Ara\xE7 ID bulunamad\u0131");return}let l=re(oe({},n),{userId:e,vehicleId:t,actionDetails:re(oe({},n.actionDetails),{oldStatus:this.activeTask?.task_status||"KAPALI"})});this.logService.createTaskLog(l).subscribe({next:()=>console.log("Log kayd\u0131 olu\u015Fturuldu"),error:m=>console.error("Log kayd\u0131 olu\u015Fturulurken hata:",m)})}gorevAc(){if(this.gorevForm.valid){this.gorevForm.get("gelisKm")?.disable();let n=this.gorevForm.getRawValue(),e=new Date,t={vehicle_id:Number(this.vehicleId),driver_id:n.surucu,assigned_authority_id:n.tahsisliMakam,ordered_by:n.emirVeren,start_km:n.cikisKm,task_paper_no:n.gorevKagitNo,route_description:n.gidilenGuzergah,return_message:n.donusMesaji||null,start_date:e,task_status:1};this.taskService.createTask(t).subscribe({next:l=>{this.createTaskLog({taskId:l.id,actionType:"GOREV_AC",actionDetails:{newStatus:"ACIK",km:t.start_km,driverName:this.drivers.find(m=>m.id===t.driver_id)?.name,routeDescription:t.route_description}}),this.taskService.startTask(l.id).subscribe({next:m=>{console.log("G\xF6rev ba\u015Flat\u0131ld\u0131:",m),this.gorevDurumu="ACIK",this.activeTask=m,this.loadTaskHistory(),this.snackBar.open(m.message||"G\xF6rev ba\u015Far\u0131yla ba\u015Flat\u0131ld\u0131","Kapat",{duration:3e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["success-snackbar"]}),setTimeout(()=>{this.router.navigate(["/dashboard"])},2e3)},error:m=>{console.error("G\xF6rev ba\u015Flatma hatas\u0131:",m);let p=m.error?.error||"G\xF6rev ba\u015Flat\u0131l\u0131rken hata olu\u015Ftu";this.snackBar.open(p,"Kapat",{duration:5e3,panelClass:["error-snackbar"]}),m.status!==400&&this.loadTaskHistory()}})},error:l=>{console.error("G\xF6rev olu\u015Fturma hatas\u0131:",l),this.snackBar.open("G\xF6rev olu\u015Fturulurken hata olu\u015Ftu","Kapat",{duration:3e3,panelClass:["error-snackbar"]})}})}else{let n=Object.keys(this.gorevForm.controls).filter(e=>this.gorevForm.get(e)?.invalid).join(", ");console.log("Eksik/hatal\u0131 alanlar:",n),this.snackBar.open(`L\xFCtfen zorunlu alanlar\u0131 doldurun: ${n}`,"Kapat",{duration:3e3,panelClass:["warning-snackbar"]})}}gorevKapat(){if(!this.activeTask?.id){this.snackBar.open("Aktif g\xF6rev bulunamad\u0131","Kapat",{duration:3e3,panelClass:["error-snackbar"]});return}this.gorevForm.get("gelisKm")?.enable();let n=this.gorevForm.get("gelisKm")?.value,e=this.gorevForm.get("cikisKm")?.value,t=this.gorevForm.get("donusMesaji")?.value||"";if(!n){this.snackBar.open("L\xFCtfen geli\u015F KM bilgisini giriniz","Kapat",{duration:3e3,panelClass:["error-snackbar"]});return}if(n<=e){this.snackBar.open("Geli\u015F KM, \xE7\u0131k\u0131\u015F KM'den b\xFCy\xFCk olmal\u0131d\u0131r","Kapat",{duration:3e3,panelClass:["error-snackbar"]});return}this.taskService.endTask(this.activeTask.id,{end_km:n,return_message:t}).subscribe({next:l=>{this.createTaskLog({taskId:this.getActiveTaskId(),actionType:"GOREV_KAPAT",actionDetails:{newStatus:"KAPALI",km:n}}),this.snackBar.open("G\xF6rev ba\u015Far\u0131yla kapat\u0131ld\u0131","Kapat",{duration:3e3,panelClass:["success-snackbar"]}),this.gorevDurumu="KAPALI",this.activeTask=null,this.loadTaskHistory(),setTimeout(()=>{this.router.navigate(["/dashboard"])},2e3)},error:l=>{console.error("G\xF6rev kapatma hatas\u0131:",l),this.snackBar.open(l.error?.error||"G\xF6rev kapat\u0131l\u0131rken bir hata olu\u015Ftu","Kapat",{duration:3e3,panelClass:["error-snackbar"]})}})}kademeGiris(){if(this.taskHistory.length===0){this.snackBar.open("Bu ara\xE7 i\xE7in hen\xFCz hi\xE7 g\xF6rev kayd\u0131 bulunmamaktad\u0131r. KM bilgisi olmad\u0131\u011F\u0131ndan kademe giri\u015Fi yap\u0131lamaz.","Kapat",{duration:5e3,panelClass:["error-snackbar"]});return}if(this.drivers.length===0){this.snackBar.open("Kay\u0131tl\u0131 s\xFCr\xFCc\xFC bulunamad\u0131. L\xFCtfen \xF6nce bir s\xFCr\xFCc\xFC kayd\u0131 yap\u0131n.","Kapat",{duration:3e3,panelClass:["error-snackbar"]});return}let e=this.taskHistory.find(p=>p.task_status==="KAPALI")?.end_km||0,t=this.drivers.find(p=>p.visibility===0)||this.drivers[0];if(!t){this.snackBar.open("Ge\xE7erli bir s\xFCr\xFCc\xFC bulunamad\u0131!","Kapat",{duration:3e3,panelClass:["error-snackbar"]});return}let l=this.personnel.find(p=>p.visibility===0)||this.personnel[0];if(!l){this.snackBar.open("Ge\xE7erli bir yetkili personel bulunamad\u0131!","Kapat",{duration:3e3,panelClass:["error-snackbar"]});return}this.dialog.open(Ue,{width:"1200px",maxWidth:"95vw",autoFocus:!1,restoreFocus:!0,ariaLabel:"Kademe Giri\u015F Modal\u0131",role:"dialog",hasBackdrop:!0,disableClose:!1,panelClass:["kademe-giris-dialog","cdk-overlay-pane-no-pointer-events"],data:{vehicle:this.vehicle,currentTask:this.activeTask,teknisyenler:[]}}).afterClosed().subscribe(p=>{if(p)if(console.log("Kademe kay\u0131t verileri:",p),this.activeTask)this.kademeKaydet(this.activeTask.id,p);else{let c={vehicle_id:Number(this.vehicleId),driver_id:t.id,assigned_authority_id:l.id,ordered_by:"Kademe \u0130\u015Flemi",start_km:e,task_paper_no:"KDM-"+new Date().getTime(),route_description:"Kademe i\u015Flemi",return_message:p.notlar||null,task_status:1};console.log("Olu\u015Fturulacak g\xF6rev verileri:",c),this.taskService.createTask(c).subscribe({next:M=>{this.activeTask=M,this.createTaskLog({taskId:M.id,actionType:"KADEME_GIRIS",actionDetails:{newStatus:"KADEMEDE",maintenanceDetails:p}}),this.kademeKaydet(M.id,p)},error:M=>{console.error("G\xF6rev olu\u015Fturma hatas\u0131:",M);let w=M.error?.details||M.error?.message||M.error?.error||"Bilinmeyen hata";this.snackBar.open("G\xF6rev olu\u015Fturulurken hata: "+w,"Kapat",{duration:5e3,panelClass:["error-snackbar"]})}})}})}kademeKaydet(n,e){console.log("Kademe kayd\u0131 i\xE7in g\xF6nderilen veri:",{taskId:n,formData:e}),this.taskService.startMaintenance(n,e).subscribe({next:t=>{console.log("Kademe kayd\u0131 yan\u0131t\u0131:",t),t.success?(this.createTaskLog({taskId:n,actionType:"KADEME_GIRIS",actionDetails:{newStatus:"KADEMEDE",maintenanceDetails:e}}),this.snackBar.open("Kademe kayd\u0131 ba\u015Far\u0131yla olu\u015Fturuldu","Kapat",{duration:3e3,panelClass:["success-snackbar"]}),this.gorevDurumu="KADEMEDE",this.loadTaskHistory(),this.updateFormControlsState()):this.snackBar.open("Kademe kayd\u0131 olu\u015Fturuldu ancak durum g\xFCncellenemedi","Kapat",{duration:3e3,panelClass:["warning-snackbar"]})},error:t=>{console.error("Kademe kayd\u0131 hatas\u0131:",t),this.snackBar.open("Kademe kayd\u0131 olu\u015Fturulurken hata: "+(t.error?.message||t.error?.error||t.message||"Bilinmeyen hata"),"Kapat",{duration:5e3,panelClass:["error-snackbar"]})}})}kademeCikis(){if(console.log("Kademe \xE7\u0131k\u0131\u015F butonuna bas\u0131ld\u0131"),console.log("Aktif g\xF6rev:",this.activeTask),!this.activeTask?.id||!this.activeTask?.maintenance_id){this.snackBar.open("Bu ara\xE7 i\xE7in aktif kademe kayd\u0131 bulunamad\u0131","Kapat",{duration:3e3,panelClass:["error-snackbar"]});return}this.dialog.open(Ye,{width:"900px",maxWidth:"95vw",maxHeight:"90vh",panelClass:"full-width-dialog",data:{vehicle:this.vehicle,activeTask:this.activeTask}}).afterClosed().subscribe(e=>{if(console.log("Dialog sonucu:",e),e&&this.activeTask?.id){let t=this.activeTask.maintenance_id||0;this.taskService.endMaintenance(this.activeTask.id,t,e).subscribe({next:l=>{this.createTaskLog({taskId:this.getActiveTaskId(),actionType:"KADEME_CIKIS",actionDetails:{newStatus:l.new_status,maintenanceDetails:e}}),this.snackBar.open("Kademe \xE7\u0131k\u0131\u015F\u0131 yap\u0131ld\u0131","Kapat",{duration:3e3,panelClass:["success-snackbar"]}),this.gorevDurumu="KAPALI",this.activeTask=null,this.loadTaskHistory(),this.updateFormControlsState()},error:l=>{console.error("Kademe \xE7\u0131k\u0131\u015F hatas\u0131:",l),this.snackBar.open("Kademe \xE7\u0131k\u0131\u015F\u0131 yap\u0131l\u0131rken hata olu\u015Ftu","Kapat",{duration:3e3,panelClass:["error-snackbar"]})}})}})}uzunYol(){if(this.gorevForm.valid){if(this.gorevForm.get("gelisKm")?.disable(),!this.gorevForm.valid){let t=Object.keys(this.gorevForm.controls).filter(l=>this.gorevForm.get(l)?.invalid).join(", ");this.snackBar.open(`L\xFCtfen zorunlu alanlar\u0131 doldurun: ${t}`,"Kapat",{duration:3e3,panelClass:["warning-snackbar"]});return}let n=this.gorevForm.getRawValue(),e={vehicle_id:Number(this.vehicleId),driver_id:n.surucu,assigned_authority_id:n.tahsisliMakam,ordered_by:n.emirVeren,start_km:n.cikisKm,task_paper_no:n.gorevKagitNo,route_description:n.gidilenGuzergah,task_status:3};this.taskService.createTask(e).subscribe({next:t=>{this.createTaskLog({taskId:t.id,actionType:"UZUN_YOL",actionDetails:{newStatus:"UZUN_YOL",km:e.start_km,driverName:this.drivers.find(l=>l.id===e.driver_id)?.name,routeDescription:e.route_description}}),this.taskService.startTask(t.id).subscribe({next:l=>{this.snackBar.open("Uzun yol g\xF6revi ba\u015Far\u0131yla ba\u015Flat\u0131ld\u0131","Kapat",{duration:3e3,panelClass:["success-snackbar"]}),this.gorevDurumu="UZUN_YOL",this.activeTask=l,this.loadTaskHistory(),setTimeout(()=>{this.router.navigate(["/dashboard"])},2e3)},error:l=>{this.loadTaskHistory(),this.snackBar.open("Uzun yol g\xF6revi olu\u015Fturuldu fakat ba\u015Flat\u0131lamad\u0131. Sayfa yenileniyor...","Kapat",{duration:3e3,panelClass:["warning-snackbar"]})}})},error:t=>{console.error("Uzun yol g\xF6revi olu\u015Fturma hatas\u0131:",t),this.snackBar.open(t.error?.error||"Uzun yol g\xF6revi olu\u015Fturulurken hata olu\u015Ftu","Kapat",{duration:3e3,panelClass:["error-snackbar"]})}})}}onSubmit(){if(this.gorevForm.valid&&this.vehicleId){let n=this.gorevForm.getRawValue(),e={vehicle_id:Number(this.vehicleId),driver_id:n.surucu,assigned_authority_id:n.tahsisliMakam,ordered_by:n.emirVeren,start_km:n.cikisKm,end_km:n.gelisKm||null,task_paper_no:n.gorevKagitNo,route_description:n.gidilenGuzergah,return_message:n.donusMesaji||null,task_status:0};console.log("G\xF6nderilen g\xF6rev verileri:",e),this.taskService.createTask(e).subscribe({next:t=>{this.snackBar.open("G\xF6rev ba\u015Far\u0131yla kaydedildi","Kapat",{duration:3e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["success-snackbar"]}),this.gorevDurumu==="ACIK"&&this.taskService.startTask(t.id).subscribe({next:()=>{console.log("G\xF6rev ba\u015Flat\u0131ld\u0131")},error:l=>{console.error("G\xF6rev ba\u015Flatma hatas\u0131:",l)}}),setTimeout(()=>{this.router.navigate(["/dashboard"])},3e3)},error:t=>{console.error("G\xF6rev kaydetme hatas\u0131:",t);let l=t.error?.message||t.error?.details||t.error?.error||t.message;this.snackBar.open("G\xF6rev kaydedilirken bir hata olu\u015Ftu: "+l,"Kapat",{duration:5e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["error-snackbar"]})}})}else this.snackBar.open("L\xFCtfen t\xFCm zorunlu alanlar\u0131 doldurun","Kapat",{duration:3e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["warning-snackbar"]})}handleError(n){this.hasError=!0,this.errorMessage=n,this.snackBar.open(n,"Kapat",{duration:5e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["error-snackbar"]}),requestAnimationFrame(()=>{setTimeout(()=>{this.router.navigate(["/dashboard"])},2e3)})}toUpperCase(n){let e=n.target,t=e.selectionStart,l=e.selectionEnd;e.value=e.value.toLocaleUpperCase("tr-TR"),e.setSelectionRange(t,l)}onlyLetters(n){let e=/[a-zA-ZğüşıöçĞÜŞİÖÇ\s]/,t=String.fromCharCode(n.charCode);return e.test(t)?!0:(n.preventDefault(),!1)}displayDriverFn(n){return n?typeof n=="string"?n:n.rutbe&&n.name?`${n.rutbe} - ${n.name}`:"":""}displayPersonnelFn(n){return n?typeof n=="string"?n:n.rank&&n.name?`${n.rank} - ${n.name}`:"":""}onDriverSelected(n){let e=n.option.value;this.gorevForm.patchValue({surucu:e.id})}onPersonnelSelected(n){let e=n.option.value;this.gorevForm.patchValue({tahsisliMakam:e.id})}calculateTaskDuration(n,e){let t=new Date(n),m=new Date(e).getTime()-t.getTime(),p=Math.floor(m/(1e3*60*60*24)),c=Math.floor(m%(1e3*60*60*24)/(1e3*60*60)),M=Math.floor(m%(1e3*60*60)/(1e3*60)),w="";return p>0&&(w+=`${p} g\xFCn `),c>0&&(w+=`${c} saat `),M>0&&(w+=`${M} dakika`),w.trim()||"1 dakikadan az"}isGorevDurumu(n){return this.gorevDurumu===n}isUzunYolClosed(n){return n.task_status==="KAPALI"&&n.task_type==="UZUN_YOL"}getStatusColor(){switch(this.gorevDurumu){case"UZUN_YOL":return"#1976d2";case"ACIK":return"#f44336";case"KADEMEDE":return"#ff9800";case"KAPALI":default:return"#4caf50"}}showMaintenanceDetails(n){if(!n.maintenance_id){this.snackBar.open("Bu g\xF6reve ait bak\u0131m detay\u0131 bulunamad\u0131","Kapat",{duration:3e3});return}return event?.stopPropagation(),event?.preventDefault(),console.log("Bak\u0131m detaylar\u0131 g\xF6r\xFCnt\xFCleniyor, taskId:",n.id,"maintenanceId:",n.maintenance_id),this.taskService.getMaintenanceDetails(n.id,n.maintenance_id).subscribe({next:e=>{this.dialog.open(We,{width:"800px",maxWidth:"95vw",panelClass:["maintenance-detail-dialog","no-scroll-dialog"],data:{maintenance:e,vehicle:this.vehicle,task:n},disableClose:!1,autoFocus:!1,closeOnNavigation:!0,restoreFocus:!0})},error:e=>{console.error("Bak\u0131m detaylar\u0131 al\u0131n\u0131rken hata:",e),this.snackBar.open("Bak\u0131m detaylar\u0131 al\u0131namad\u0131","Kapat",{duration:3e3,panelClass:["error-snackbar"]})}}),!1}canEnterMaintenance(){return this.gorevDurumu==="KADEMEDE"||this.gorevDurumu==="ACIK"?!1:this.gorevDurumu==="KAPALI"}isVehicleAvailable(){return!this.taskHistory.some(e=>e.task_status==="ACIK"||e.task_status==="KADEMEDE"||e.task_status==="UZUN_YOL")}isLastClosedTask(n){if(n.task_status!=="KAPALI")return!1;let e=this.taskHistory.filter(l=>l.task_status==="KAPALI");return e.length===0?!1:[...e].sort((l,m)=>{let p=new Date(l.end_date||l.created_at);return new Date(m.end_date||m.created_at).getTime()-p.getTime()})[0].id===n.id}openKmEditDialog(n){if(!this.isAdmin){this.snackBar.open("Bu i\u015Flem i\xE7in y\xF6netici yetkisi gerekiyor","Tamam",{duration:3e3,panelClass:["warning-snackbar"]});return}if(n.task_status!=="KAPALI"){this.snackBar.open("Sadece kapal\u0131 g\xF6revlerde KM g\xFCncellemesi yap\u0131labilir","Tamam",{duration:3e3,panelClass:["warning-snackbar"]});return}if(!this.isVehicleAvailable()){this.snackBar.open("Ara\xE7 \u015Fu anda aktif bir g\xF6revde oldu\u011Fu i\xE7in KM g\xFCncellemesi yap\u0131lamaz","Tamam",{duration:3e3,panelClass:["warning-snackbar"]});return}if(!this.isLastClosedTask(n)){this.snackBar.open("Sadece en son kapat\u0131lan g\xF6revde KM g\xFCncellemesi yap\u0131labilir","Tamam",{duration:3e3,panelClass:["warning-snackbar"]});return}this.dialog.open(Ze,{width:"500px",data:{task:n,vehicle:this.vehicle},disableClose:!1,ariaLabelledBy:"km-edit-dialog-title",autoFocus:!0,restoreFocus:!0}).afterClosed().subscribe(t=>{t&&this.updateTaskKm(t.taskId,t.endKm,t.reason)})}updateTaskKm(n,e,t){this.taskService.updateTaskEndKm(n,e,t).subscribe({next:l=>{this.snackBar.open("KM bilgisi ba\u015Far\u0131yla g\xFCncellendi","Tamam",{duration:2e3,panelClass:["success-snackbar"]}),this.createTaskLog({taskId:n,actionType:"KM_GUNCELLEME",actionDetails:{km:e,reason:t,updatedBy:this.authService.getCurrentUser()?.username}}),this.loadTaskHistory()},error:l=>{console.error("KM g\xFCncelleme hatas\u0131:",l),this.snackBar.open("KM bilgisi g\xFCncellenirken bir hata olu\u015Ftu: "+(l.error?.message||l.message||"Bilinmeyen hata"),"Tamam",{duration:3e3,panelClass:["error-snackbar"]})}})}static \u0275fac=function(e){return new(e||a)(h(Wt),h(De),h(fn),h(U),h(Dn),h($n),h(Qe),h(An),h(Tn),h(Wn),h(Zt))};static \u0275cmp=S({type:a,selectors:[["app-gorev-kayit"]],decls:3,vars:2,consts:[["driverAuto","matAutocomplete"],["personnelAuto","matAutocomplete"],[1,"gorev-kayit-container"],["class","error-message",4,"ngIf"],["class","vehicle-info",4,"ngIf"],[1,"error-message"],[1,"vehicle-info"],[1,"vehicle-header"],[1,"header-status"],[3,"ngStyle"],[1,"vehicle-details"],[3,"ngSubmit","formGroup"],[1,"form-grid"],["appearance","outline"],["matInput","","formControlName","aracPlakasi",3,"value"],["matInput","","placeholder","S\xFCr\xFCc\xFC ara...",3,"formControl","disabled","matAutocomplete"],[3,"optionSelected","displayWith"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["matInput","","placeholder","Personel ara...",3,"formControl","readonly","disabled","matAutocomplete"],["matInput","","formControlName","emirVeren","maxlength","25",2,"text-transform","uppercase",3,"input","keypress","disabled"],["matInput","","formControlName","gorevKagitNo","maxlength","15",3,"disabled"],["matInput","","formControlName","gidilenGuzergah","rows","2","maxlength","",3,"disabled"],["matInput","","type","number","formControlName","cikisKm",3,"disabled","placeholder"],["matInput","","type","number","formControlName","gelisKm",3,"disabled","placeholder"],["appearance","outline",1,"full-width"],["matInput","","formControlName","donusMesaji","rows","2","maxlength","200",3,"disabled","placeholder"],["align","end",4,"ngIf"],[1,"button-group"],["mat-raised-button","","color","primary","type","button",2,"background-color","green !important","color","white !important",3,"click","disabled"],["mat-raised-button","","color","primary","type","button",2,"background-color","#2196F3 !important","color","white !important",3,"click","disabled"],["mat-raised-button","","color","warn","type","button",2,"background-color","#f44336 !important","color","white !important",3,"click","disabled"],["mat-raised-button","","color","accent","type","button",2,"background-color","#ff9800 !important","color","white !important",3,"click","disabled"],[1,"task-history"],["mat-table","","class","mat-elevation-z8",3,"dataSource",4,"ngIf"],["class","no-tasks",4,"ngIf"],[3,"value"],["align","end"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","created_at"],["mat-header-cell","","style","font-weight: bold;",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","task_status"],["matColumnDef","maintenance_details"],["mat-cell","","class","maintenance-column",4,"matCellDef"],["matColumnDef","driver_info"],["matColumnDef","authority_info"],["matColumnDef","task_info"],["matColumnDef","return_message"],["matColumnDef","km_info"],["matColumnDef","end_date"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"ngClass",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",2,"font-weight","bold"],["mat-cell",""],[1,"status-container"],[1,"task-status",3,"ngClass"],["class","task-type",4,"ngIf"],[1,"task-type"],["mat-cell","",1,"maintenance-column"],["mat-mini-fab","","color","accent","class","maintenance-button","matTooltip","Kademe detaylar\u0131n\u0131 g\xF6ster",3,"click",4,"ngIf"],["class","no-maintenance",4,"ngIf"],["mat-mini-fab","","color","accent","matTooltip","Kademe detaylar\u0131n\u0131 g\xF6ster",1,"maintenance-button",3,"click"],[1,"no-maintenance"],["mat-icon-button","","color","primary","matTooltip","KM bilgisini d\xFCzenle",3,"click",4,"ngIf"],["mat-icon-button","","color","primary","matTooltip","KM bilgisini d\xFCzenle",3,"click"],["mat-header-row",""],["mat-row","",3,"ngClass"],[1,"no-tasks"]],template:function(e,t){e&1&&(r(0,"div",2),u(1,$i,7,1,"div",3)(2,La,112,53,"div",4),i()),e&2&&(s(),d("ngIf",t.hasError),s(),d("ngIf",t.vehicle&&!t.hasError))},dependencies:[T,Te,de,F,$t,qt,Ke,j,N,G,R,L,z,ze,vn,V,B,q,$,H,Ne,W,Y,D,K,rn,sn,fe,Z,Yn,qn,Fn,Sn,wn,_n,ge,ue,ti,Jn,gt,Hn,In,Ln,Vn,zn,Gn,Bn,Nn,Rn,Un,jn,A,En,Pn],styles:['.gorev-kayit-container[_ngcontent-%COMP%]{padding:20px 50px 20px 10px;width:calc(100% - 80px);margin:0 auto;display:flex;flex-direction:column;gap:20px}.gorev-kayit-container[_ngcontent-%COMP%]   .vehicle-info[_ngcontent-%COMP%]{background:#fff;padding:24px;border-radius:12px;margin-bottom:24px;box-shadow:0 4px 12px #0000000d}.gorev-kayit-container[_ngcontent-%COMP%]   .vehicle-info[_ngcontent-%COMP%]   .vehicle-header[_ngcontent-%COMP%]{margin-bottom:2rem;border-bottom:2px solid #f0f0f0;padding-bottom:1.5rem}.gorev-kayit-container[_ngcontent-%COMP%]   .vehicle-info[_ngcontent-%COMP%]   .vehicle-header[_ngcontent-%COMP%]   .header-status[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;margin-bottom:16px}.gorev-kayit-container[_ngcontent-%COMP%]   .vehicle-info[_ngcontent-%COMP%]   .vehicle-header[_ngcontent-%COMP%]   .header-status[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#2c3e50;font-size:1.8rem;font-weight:600}.gorev-kayit-container[_ngcontent-%COMP%]   .vehicle-info[_ngcontent-%COMP%]   .vehicle-header[_ngcontent-%COMP%]   .header-status[_ngcontent-%COMP%]   mat-chip-set[_ngcontent-%COMP%]{margin-left:16px}.gorev-kayit-container[_ngcontent-%COMP%]   .vehicle-info[_ngcontent-%COMP%]   .vehicle-header[_ngcontent-%COMP%]   .vehicle-details[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1rem}.gorev-kayit-container[_ngcontent-%COMP%]   .vehicle-info[_ngcontent-%COMP%]   .vehicle-header[_ngcontent-%COMP%]   .vehicle-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;padding:1rem;background-color:#f8fafc;border-radius:8px;border-left:4px solid #1976d2}.gorev-kayit-container[_ngcontent-%COMP%]   .vehicle-info[_ngcontent-%COMP%]   .vehicle-header[_ngcontent-%COMP%]   .vehicle-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#1976d2;margin-right:.75rem;font-size:.9rem;text-transform:uppercase;letter-spacing:.5px}.gorev-kayit-container[_ngcontent-%COMP%]   .vehicle-info[_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:24px;margin-top:2rem}.gorev-kayit-container[_ngcontent-%COMP%]   .vehicle-info[_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]:nth-child(-n+4){grid-column:span 1}.gorev-kayit-container[_ngcontent-%COMP%]   .vehicle-info[_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]:nth-child(n+5):nth-child(-n+8){grid-column:span 1}.gorev-kayit-container[_ngcontent-%COMP%]   .vehicle-info[_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]:nth-child(9){grid-column:1/-1}.gorev-kayit-container[_ngcontent-%COMP%]   .vehicle-info[_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{grid-column:1/-1}.gorev-kayit-container[_ngcontent-%COMP%]   .vehicle-info[_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}.gorev-kayit-container[_ngcontent-%COMP%]   .vehicle-info[_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%]   mat-form-field.mat-form-field-appearance-outline[_ngcontent-%COMP%]   .mat-form-field-wrapper[_ngcontent-%COMP%]{margin:0;padding:0}.gorev-kayit-container[_ngcontent-%COMP%]   .vehicle-info[_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%]   .status-section[_ngcontent-%COMP%]{grid-column:1/-1;display:flex;justify-content:center;margin:24px 0;padding:16px;background:#f8fafc;border-radius:8px}.gorev-kayit-container[_ngcontent-%COMP%]   .vehicle-info[_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%]   .status-section[_ngcontent-%COMP%]   mat-chip-set[_ngcontent-%COMP%]   .mat-chip[_ngcontent-%COMP%]{font-size:1rem;padding:12px 20px}.gorev-kayit-container[_ngcontent-%COMP%]   .vehicle-info[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:16px;margin-top:32px;justify-content:center;padding:24px;background:#f8fafc;border-radius:12px}.gorev-kayit-container[_ngcontent-%COMP%]   .vehicle-info[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:160px;padding:8px 24px;font-weight:500;font-size:1rem;border-radius:8px;transition:all .3s ease}.gorev-kayit-container[_ngcontent-%COMP%]   .vehicle-info[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   button.mat-raised-button[color=primary][_ngcontent-%COMP%]{background:#1976d2}.gorev-kayit-container[_ngcontent-%COMP%]   .vehicle-info[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   button.mat-raised-button[color=primary][_ngcontent-%COMP%]:hover:not([disabled]){background:#1565c0;transform:translateY(-2px)}.gorev-kayit-container[_ngcontent-%COMP%]   .vehicle-info[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   button.mat-raised-button[color=warn][_ngcontent-%COMP%]{background:#ef5350}.gorev-kayit-container[_ngcontent-%COMP%]   .vehicle-info[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   button.mat-raised-button[color=warn][_ngcontent-%COMP%]:hover:not([disabled]){background:#e53935;transform:translateY(-2px)}.gorev-kayit-container[_ngcontent-%COMP%]   .vehicle-info[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   button.mat-raised-button[color=accent][_ngcontent-%COMP%]{background:#7e57c2}.gorev-kayit-container[_ngcontent-%COMP%]   .vehicle-info[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   button.mat-raised-button[color=accent][_ngcontent-%COMP%]:hover:not([disabled]){background:#673ab7;transform:translateY(-2px)}.gorev-kayit-container[_ngcontent-%COMP%]   .vehicle-info[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.4!important;background-color:#ccc!important;color:#666!important;cursor:not-allowed;transform:none!important;box-shadow:none!important}.gorev-kayit-container[_ngcontent-%COMP%]   .vehicle-info[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled   .mat-icon[_ngcontent-%COMP%]{color:#666!important}.vehicle-header[_ngcontent-%COMP%]{margin-bottom:2rem;padding-bottom:1rem;border-bottom:1px solid #eee}.vehicle-header[_ngcontent-%COMP%]   .vehicle-details[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem;margin-top:1rem}.vehicle-header[_ngcontent-%COMP%]   .vehicle-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;padding:.5rem;background-color:#f8f9fa;border-radius:4px}.vehicle-header[_ngcontent-%COMP%]   .vehicle-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#1976d2;margin-right:.5rem}.error-message[_ngcontent-%COMP%]{text-align:center;padding:2rem;background-color:#ffebee;border-radius:8px;margin:2rem auto;max-width:500px}.error-message[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#f44336;font-size:48px;height:48px;width:48px;margin-bottom:1rem}.error-message[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;color:#d32f2f;font-size:1.2rem;margin-bottom:1rem}.error-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin:0}  .mat-mdc-select-panel mat-option{background-color:#fff!important}  .mat-mdc-select-arrow{margin-right:15px;width:30px}  .mat-mdc-select-arrow svg{width:30px;height:30px}  .centered-panel .mat-mdc-option{text-align:center!important;justify-content:center!important}  .centered-panel .mat-mdc-option .mdc-list-item__primary-text{flex:none!important}  .mat-mdc-select-min-line{padding-left:15px}  .mat-mdc-form-field .mat-mdc-input-element{padding-left:15px!important}  .mat-mdc-form-field textarea.mat-mdc-input-element{padding-left:15px!important}  .success-snackbar{background-color:#4caf50!important;color:#fff!important}  .success-snackbar .mdc-snackbar__surface{background-color:#4caf50!important}  .success-snackbar .mat-mdc-snack-bar-label,   .success-snackbar .mat-mdc-snack-bar-actions{color:#fff!important}  .success-snackbar .mdc-button__label{color:#fff!important}  .mat-mdc-option{background-color:#fff!important}  .mat-mdc-option:hover{background-color:#0000000a!important}  .mat-mdc-autocomplete-panel{background:#fff!important}  .mat-mdc-option.mdc-list-item--selected{background-color:#1976d21a!important}  .warning-snackbar{background-color:#f44336!important;color:#fff!important}  .warning-snackbar .mdc-snackbar__surface{background-color:#f44336!important}  .warning-snackbar .mat-mdc-snack-bar-label,   .warning-snackbar .mat-mdc-snack-bar-actions{color:#fff!important}  .warning-snackbar .mdc-button__label{color:#fff!important}.task-history[_ngcontent-%COMP%]{margin-top:2rem;padding:1rem;background:#f8f9fa;border-radius:8px}.task-history[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#2c3e50;margin-bottom:1rem}.task-history[_ngcontent-%COMP%]   .task-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.task-history[_ngcontent-%COMP%]   .task-list[_ngcontent-%COMP%]   .task-item[_ngcontent-%COMP%]{background:#fff;padding:1rem;border-radius:8px;box-shadow:0 2px 4px #0000000d}.task-history[_ngcontent-%COMP%]   .task-list[_ngcontent-%COMP%]   .task-item[_ngcontent-%COMP%]   .task-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:.5rem;padding-bottom:.5rem;border-bottom:1px solid #eee}.task-history[_ngcontent-%COMP%]   .task-list[_ngcontent-%COMP%]   .task-item[_ngcontent-%COMP%]   .task-header[_ngcontent-%COMP%]   .task-date[_ngcontent-%COMP%]{color:#666;font-size:.9rem}.task-history[_ngcontent-%COMP%]   .task-list[_ngcontent-%COMP%]   .task-item[_ngcontent-%COMP%]   .task-header[_ngcontent-%COMP%]   .task-status[_ngcontent-%COMP%]{padding:.25rem .75rem;border-radius:4px;font-size:.9rem;font-weight:500}.task-history[_ngcontent-%COMP%]   .task-list[_ngcontent-%COMP%]   .task-item[_ngcontent-%COMP%]   .task-header[_ngcontent-%COMP%]   .task-status.kapali[_ngcontent-%COMP%]{background:#e0e0e0;color:#333}.task-history[_ngcontent-%COMP%]   .task-list[_ngcontent-%COMP%]   .task-item[_ngcontent-%COMP%]   .task-header[_ngcontent-%COMP%]   .task-status.acik[_ngcontent-%COMP%]{background:#4caf50;color:#fff}.task-history[_ngcontent-%COMP%]   .task-list[_ngcontent-%COMP%]   .task-item[_ngcontent-%COMP%]   .task-header[_ngcontent-%COMP%]   .task-status.kademede[_ngcontent-%COMP%]{background:#ff9800;color:#fff}.task-history[_ngcontent-%COMP%]   .task-list[_ngcontent-%COMP%]   .task-item[_ngcontent-%COMP%]   .task-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.5rem 0;color:#333}.task-history[_ngcontent-%COMP%]   .task-list[_ngcontent-%COMP%]   .task-item[_ngcontent-%COMP%]   .task-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#1976d2;margin-right:.5rem}.task-history[_ngcontent-%COMP%]   .no-tasks[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:#666;font-style:italic}.task-history[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]{width:100%;background:#fff;box-shadow:0 2px 4px #0000001a}.task-history[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .mat-header-cell[_ngcontent-%COMP%]{font-weight:600;color:#2c3e50;background-color:#f8f9fa}.task-history[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]{padding:12px}.task-history[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .task-status[_ngcontent-%COMP%]{padding:4px 8px;border-radius:4px;font-size:.9rem;font-weight:500}.task-history[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .task-status.kapali[_ngcontent-%COMP%]{background:#e0e0e0;color:#333}.task-history[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .task-status.acik[_ngcontent-%COMP%]{background:#4caf50;color:#fff}.task-history[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .task-status.kademede[_ngcontent-%COMP%]{background:#ff9800;color:#fff}.task-history[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .return-message[_ngcontent-%COMP%]{margin-top:4px;font-size:.9em;color:#666}.task-history[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .row-uzun-yol[_ngcontent-%COMP%]{background-color:#1976d20a;transition:background-color .3s}.task-history[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .row-uzun-yol[_ngcontent-%COMP%]:hover{background-color:#1976d214}.task-history[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .row-uzun-yol[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-left:4px solid #1976d2}.task-history[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .row-acik[_ngcontent-%COMP%]{background-color:#f443360a;transition:background-color .3s}.task-history[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .row-acik[_ngcontent-%COMP%]:hover{background-color:#f4433614}.task-history[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .row-acik[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-left:4px solid #f44336}.task-history[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .row-kapali[_ngcontent-%COMP%]{background-color:#4caf500a;transition:background-color .3s}.task-history[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .row-kapali[_ngcontent-%COMP%]:hover{background-color:#4caf5014}.task-history[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .row-kapali[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-left:4px solid #4caf50}.task-history[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .row-kademede[_ngcontent-%COMP%]{background-color:#ff98000a;transition:background-color .3s}.task-history[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .row-kademede[_ngcontent-%COMP%]:hover{background-color:#ff980014}.task-history[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .row-kademede[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-left:4px solid #ff9800}.task-history[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{border-top-left-radius:4px;border-bottom-left-radius:4px}.task-history[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-top-right-radius:4px;border-bottom-right-radius:4px}.task-history[_ngcontent-%COMP%]   .no-tasks[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:#666;font-style:italic;background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a}.task-history[_ngcontent-%COMP%]{margin-top:2rem}.task-history[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#2c3e50;font-size:1.5rem;margin-bottom:1rem;padding-bottom:.5rem;border-bottom:2px solid #e0e0e0}.task-history[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]{width:100%;box-shadow:0 2px 8px #0000001a!important;border-radius:8px;overflow:hidden}.task-history[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .mat-header-cell[_ngcontent-%COMP%]{background-color:#f5f7fa;color:#2c3e50;font-weight:700!important;font-size:1rem;padding:16px;text-transform:uppercase;letter-spacing:.5px;border-bottom:2px solid #e0e0e0;position:relative}.task-history[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .mat-header-cell[_ngcontent-%COMP%]:after{content:"";position:absolute;left:0;right:0;bottom:0;height:2px;background:#0000000d}.task-history[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]{padding:12px 16px;font-size:.9rem;line-height:1.5;color:#444}.task-history[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#1976d2;font-weight:500}.task-history[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.task-history[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .task-status[_ngcontent-%COMP%]{padding:4px 12px;border-radius:20px;font-weight:500;font-size:.85rem;text-align:center;display:inline-block;min-width:90px}.task-history[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .task-status.kapali[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.task-history[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .task-status.acik[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.task-history[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .task-status.kademede[_ngcontent-%COMP%]{background:#fff3e0;color:#ef6c00}.task-history[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .task-status.uzun_yol[_ngcontent-%COMP%]{background:#e1f5fe;color:#0277bd}.task-history[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .task-status.uzun-yol[_ngcontent-%COMP%]{background:#1976d2;color:#fff}.task-history[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .task-status.uzun-yol-closed[_ngcontent-%COMP%]{background:#e3f2fd;color:#1976d2;border:1px solid #1976d2}.task-history[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#666;display:block;margin-top:4px;font-size:.85rem}.task-history[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .return-message[_ngcontent-%COMP%]{padding:8px;background:#f5f7fa;border-radius:4px;margin-top:4px;font-style:italic;color:#666}.task-history[_ngcontent-%COMP%]   .no-tasks[_ngcontent-%COMP%]{text-align:center;padding:2rem;background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;color:#666;font-style:italic}.mat-column-created_at[_ngcontent-%COMP%], .mat-column-end_date[_ngcontent-%COMP%]{width:160px;white-space:nowrap}.mat-column-task_status[_ngcontent-%COMP%]{width:120px;text-align:center}.mat-column-driver_info[_ngcontent-%COMP%]{width:180px}.mat-column-km_info[_ngcontent-%COMP%]{width:140px;text-align:right}.status-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:4px;position:relative}.status-container[_ngcontent-%COMP%]   .task-type[_ngcontent-%COMP%]{font-size:.75rem;color:#1976d2;font-style:italic}.status-container[_ngcontent-%COMP%]   .details-button[_ngcontent-%COMP%]{position:absolute;top:-10px;right:-10px;width:24px;height:24px;line-height:24px;background-color:#fff;border:1px solid #ff9800}.status-container[_ngcontent-%COMP%]   .details-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px;line-height:16px;color:#ff9800}.status-container[_ngcontent-%COMP%]   .details-button[_ngcontent-%COMP%]:hover{background-color:#ff9800}.status-container[_ngcontent-%COMP%]   .details-button[_ngcontent-%COMP%]:hover   .mat-icon[_ngcontent-%COMP%]{color:#fff}.maintenance-column[_ngcontent-%COMP%]{text-align:center;width:80px}.maintenance-column[_ngcontent-%COMP%]   .maintenance-button[_ngcontent-%COMP%]{width:36px;height:36px;line-height:36px;background-color:#ff9800}.maintenance-column[_ngcontent-%COMP%]   .maintenance-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px;line-height:18px;color:#fff}.maintenance-column[_ngcontent-%COMP%]   .maintenance-button[_ngcontent-%COMP%]:hover{background-color:#cc7a00;transform:scale(1.1);transition:all .2s ease}.maintenance-column[_ngcontent-%COMP%]   .no-maintenance[_ngcontent-%COMP%]{color:#aaa;font-style:italic}']})};export{oi as GorevDurumu,ai as GorevKayitComponent};
