import{c as ue,h as ge}from"./chunk-YIHN4U44.js";import{a as b}from"./chunk-YCMZOG5D.js";import{d as G}from"./chunk-7Y2WBOK2.js";import{a as S,b as Se,c as we}from"./chunk-ZAAPSDV2.js";import{a as fe,b as _e,c as Me,d as Ce,e as he,f as be,g as Pe,h as xe,i as ke,j as Oe,l as ye,m as ve}from"./chunk-77IFEZ4Y.js";import{b as U,c as Y}from"./chunk-RGE5UITQ.js";import{a as v,b as de}from"./chunk-6W4OZ6UG.js";import"./chunk-V53DAUX5.js";import"./chunk-CUXZVNAD.js";import{A as re,D as ae,E as le,I as me,J as se,b as K,d as P,f as Z,g as J,k as W,n as X,o as ee,t as te,v as ne,x as oe,y as ie}from"./chunk-QXD5EQ3A.js";import{a as ce,b as pe}from"./chunk-H22G77YG.js";import{f as j,i as q,k as Q}from"./chunk-PY43KAL6.js";import{Ab as D,Eb as a,Fb as f,Gb as y,Ha as m,La as _,Nb as B,Pb as R,Ra as T,Tb as V,Vb as H,Wa as c,bb as p,ha as x,ia as k,kb as r,lb as i,mb as M,mc as N,nb as u,ob as g,oc as z,qb as O,sb as C,tb as h,tc as $,wc as L,yb as w,zb as E,zc as A}from"./chunk-DASZUGZO.js";import{a as F,b as I}from"./chunk-OXVY4BEJ.js";var De=()=>[12,24,48,60],Fe=(n,t)=>({"status-active":n,"status-inactive":t});function Ie(n,t){if(n&1&&(r(0,"mat-error"),a(1),i()),n&2){let e=h();m(),f(e.getNameErrorMessage())}}function Te(n,t){if(n&1&&(r(0,"mat-error"),a(1),i()),n&2){let e=h();m(),f(e.getRankErrorMessage())}}function Be(n,t){if(n&1){let e=O();r(0,"button",29),C("click",function(){x(e);let l=h();return k(l.resetForm())}),a(1," \u0130ptal "),i()}}function Re(n,t){n&1&&(r(0,"th",30),a(1,"ID"),i())}function Ve(n,t){if(n&1&&(r(0,"td",31),a(1),i()),n&2){let e=t.$implicit;m(),f(e.id)}}function He(n,t){n&1&&(r(0,"th",30),a(1,"\u0130sim"),i())}function Ne(n,t){if(n&1&&(r(0,"td",31),a(1),i()),n&2){let e=t.$implicit;m(),f(e.name)}}function ze(n,t){n&1&&(r(0,"th",30),a(1,"R\xFCtbe/Makam"),i())}function $e(n,t){if(n&1&&(r(0,"td",31),a(1),i()),n&2){let e=t.$implicit;m(),f(e.rank)}}function Le(n,t){n&1&&(r(0,"th",30),a(1,"Eklenme Tarihi"),i())}function Ae(n,t){if(n&1&&(r(0,"td",31),a(1),V(2,"date"),i()),n&2){let e=t.$implicit;m(),y(" ",e.created_at?H(2,1,e.created_at,"dd.MM.yyyy HH:mm"):"Tarih Belirsiz"," ")}}function Ge(n,t){n&1&&(r(0,"th",32),a(1,"Durum"),i())}function je(n,t){if(n&1){let e=O();r(0,"td",31)(1,"button",33),C("click",function(){let l=x(e).$implicit,s=h();return k(s.toggleVisibility(l))}),r(2,"mat-icon",34),a(3),i()()()}if(n&2){let e=t.$implicit;m(2),p("ngClass",R(2,Fe,e.visibility!==1,e.visibility===1)),m(),y(" ",e.visibility===1?"visibility_off":"visibility"," ")}}function qe(n,t){n&1&&(r(0,"th",32),a(1,"\u0130\u015Flemler"),i())}function Qe(n,t){if(n&1){let e=O();r(0,"td",31)(1,"button",35),C("click",function(l){let s=x(e).$implicit,d=h();return k(d.editPersonnel(s,l))}),r(2,"mat-icon"),a(3,"edit"),i()()()}}function Ue(n,t){n&1&&M(0,"tr",36)}function Ye(n,t){n&1&&M(0,"tr",37)}var Ee=class n{constructor(t,e,o,l,s){this.http=t;this.fb=e;this.snackBar=o;this.dialog=l;this.router=s;this.personnelForm=this.fb.group({name:["",[P.required,P.maxLength(100)]],rank:["",[P.required,P.maxLength(50)]]})}personnelForm;displayedColumns=["id","name","rank","created_at","status","actions"];dataSource=new ve([]);editMode=!1;currentId=null;paginator;sort;ngOnInit(){this.loadPersonnel(),console.log("PersonnelManagement bile\u015Feni ba\u015Flat\u0131ld\u0131")}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}loadPersonnel(){console.log("Personel listesi y\xFCkleniyor..."),this.http.get(`${b.apiUrl}/personnel`).subscribe({next:t=>{console.log("Personel listesi ba\u015Far\u0131yla y\xFCklendi:",t);let e=t.map(o=>(o.created_at?typeof o.created_at=="string"&&isNaN(Date.parse(o.created_at))&&(o.created_at=new Date().toISOString()):o.created_at=new Date().toISOString(),o));console.log("Formatlanm\u0131\u015F data:",e),this.dataSource.data=e},error:t=>{console.error("Personel listesi y\xFCklenirken hata olu\u015Ftu:",t),this.snackBar.open("Personel listesi y\xFCklenemedi","Tamam",{duration:3e3,panelClass:["error-snackbar"]})}})}applyFilter(t){let e=t.target.value;this.dataSource.filter=e.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}onSubmit(){if(this.personnelForm.valid){let t=this.personnelForm.value;try{this.editMode&&this.currentId?(console.log("Personel g\xFCncelleme i\u015Flemi ba\u015Flat\u0131l\u0131yor:",{id:this.currentId,data:t}),this.http.put(`${b.apiUrl}/personnel/${this.currentId}`,t).subscribe({next:e=>{console.log("Personel ba\u015Far\u0131yla g\xFCncellendi:",e),this.resetForm(),this.loadPersonnel(),this.snackBar.open("Personel ba\u015Far\u0131yla g\xFCncellendi","Tamam",{duration:3e3,panelClass:["success-snackbar"]})},error:e=>{console.error("Personel g\xFCncellenirken hata olu\u015Ftu:",e),this.snackBar.open("Personel g\xFCncellenemedi","Tamam",{duration:3e3,panelClass:["error-snackbar"]})}})):this.http.post(`${b.apiUrl}/personnel`,t).subscribe({next:e=>{this.resetForm(),this.loadPersonnel(),this.snackBar.open("Personel ba\u015Far\u0131yla kaydedildi","Tamam",{duration:3e3,panelClass:["success-snackbar"]})},error:e=>{console.error("Personel kaydedilirken hata:",e),this.snackBar.open("Personel kaydedilemedi","Tamam",{duration:3e3,panelClass:["error-snackbar"]})}})}catch(e){console.error("\u0130\u015Flem s\u0131ras\u0131nda beklenmedik hata:",e)}}}editPersonnel(t,e){e.preventDefault(),e.stopPropagation(),console.log("Personel d\xFCzenleme ba\u015Flat\u0131l\u0131yor:",t);try{this.editMode=!0,this.currentId=t.id,this.personnelForm.patchValue({name:t.name,rank:t.rank}),console.log("Form de\u011Ferleri g\xFCncellendi:",this.personnelForm.value),window.scrollTo({top:0,behavior:"smooth"})}catch(o){console.error("D\xFCzenleme i\u015Fleminde hata:",o),this.snackBar.open("D\xFCzenleme i\u015Flemi ba\u015Flat\u0131lamad\u0131","Tamam",{duration:3e3})}}resetForm(){this.editMode=!1,this.currentId=null,this.personnelForm.reset()}toggleVisibility(t){let e=t.visibility===0?1:0;this.http.put(`${b.apiUrl}/personnel/${t.id}/visibility`,{visibility:e}).subscribe({next:o=>{let l=this.dataSource.data.findIndex(d=>d.id===t.id);if(l!==-1){let d=[...this.dataSource.data];d[l]=I(F({},d[l]),{visibility:e}),this.dataSource.data=d}let s=e===0?"aktif":"pasif";this.snackBar.open(`Personel durumu ${s} olarak g\xFCncellendi`,"Tamam",{duration:3e3,panelClass:["success-snackbar"]})},error:o=>{console.error("Durum g\xFCncellenirken hata:",o),this.snackBar.open("Durum g\xFCncellenemedi","Tamam",{duration:3e3,panelClass:["error-snackbar"]})}})}getNameErrorMessage(){return this.personnelForm.get("name")?.hasError("required")?"\u0130sim gereklidir":this.personnelForm.get("name")?.hasError("maxlength")?"\u0130sim en fazla 100 karakter olabilir":""}getRankErrorMessage(){return this.personnelForm.get("rank")?.hasError("required")?"R\xFCtbe/Makam gereklidir":this.personnelForm.get("rank")?.hasError("maxlength")?"R\xFCtbe/Makam en fazla 50 karakter olabilir":""}static \u0275fac=function(e){return new(e||n)(_(A),_(te),_(U),_(ue),_(G))};static \u0275cmp=T({type:n,selectors:[["app-personnel-management"]],viewQuery:function(e,o){if(e&1&&(w(v,5),w(S,5)),e&2){let l;E(l=D())&&(o.paginator=l.first),E(l=D())&&(o.sort=l.first)}},decls:53,vars:12,consts:[[1,"personnel-container"],[1,"form-section"],[3,"ngSubmit","formGroup"],[1,"form-row"],["appearance","outline"],["matInput","","formControlName","name","placeholder","\xD6rn: ALBAY AHMET YILMAZ"],[4,"ngIf"],["matInput","","formControlName","rank","placeholder","\xD6rn: TABUR KOMUTANI"],[1,"button-row"],["type","submit","mat-raised-button","","color","primary",3,"disabled"],["type","button","mat-stroked-button","",3,"click",4,"ngIf"],[1,"list-section"],["appearance","outline",1,"filter-field"],["matInput","","placeholder","\u0130sim veya r\xFCtbe ile arama yap\u0131n...",3,"keyup"],["matSuffix",""],[1,"table-container"],["mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","rank"],["matColumnDef","created_at"],["matColumnDef","status"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],["type","button","mat-stroked-button","",3,"click"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-icon-button","",3,"click"],[3,"ngClass"],["mat-icon-button","","color","primary",1,"edit-button",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(e,o){if(e&1&&(r(0,"div",0)(1,"div",1)(2,"h2"),a(3),i(),r(4,"form",2),C("ngSubmit",function(){return o.onSubmit()}),r(5,"div",3)(6,"mat-form-field",4)(7,"mat-label"),a(8,"\u0130sim"),i(),M(9,"input",5),c(10,Ie,2,1,"mat-error",6),i()(),r(11,"div",3)(12,"mat-form-field",4)(13,"mat-label"),a(14,"R\xFCtbe/Makam"),i(),M(15,"input",7),c(16,Te,2,1,"mat-error",6),i()(),r(17,"div",8)(18,"button",9),a(19),i(),c(20,Be,2,0,"button",10),i()()(),r(21,"div",11)(22,"h2"),a(23,"Personel Listesi"),i(),r(24,"mat-form-field",12)(25,"mat-label"),a(26,"Filtrele"),i(),r(27,"input",13),C("keyup",function(s){return o.applyFilter(s)}),i(),r(28,"mat-icon",14),a(29,"search"),i()(),r(30,"div",15)(31,"table",16),u(32,17),c(33,Re,2,0,"th",18)(34,Ve,2,1,"td",19),g(),u(35,20),c(36,He,2,0,"th",18)(37,Ne,2,1,"td",19),g(),u(38,21),c(39,ze,2,0,"th",18)(40,$e,2,1,"td",19),g(),u(41,22),c(42,Le,2,0,"th",18)(43,Ae,3,4,"td",19),g(),u(44,23),c(45,Ge,2,0,"th",24)(46,je,4,5,"td",19),g(),u(47,25),c(48,qe,2,0,"th",24)(49,Qe,4,0,"td",19),g(),c(50,Ue,1,0,"tr",26)(51,Ye,1,0,"tr",27),i()(),M(52,"mat-paginator",28),i()()),e&2){let l,s;m(3),f(o.editMode?"Personel D\xFCzenle":"Yeni Personel Ekle"),m(),p("formGroup",o.personnelForm),m(6),p("ngIf",(l=o.personnelForm.get("name"))==null?null:l.invalid),m(6),p("ngIf",(s=o.personnelForm.get("rank"))==null?null:s.invalid),m(2),p("disabled",o.personnelForm.invalid),m(),y(" ",o.editMode?"G\xFCncelle":"Kaydet"," "),m(),p("ngIf",o.editMode),m(11),p("dataSource",o.dataSource),m(19),p("matHeaderRowDef",o.displayedColumns),m(),p("matRowDefColumns",o.displayedColumns),m(),p("pageSizeOptions",B(11,De))}},dependencies:[L,N,z,$,ye,fe,Me,Pe,Ce,_e,xe,he,be,ke,Oe,de,v,we,S,Se,le,ae,oe,ie,re,se,me,Q,q,j,pe,ce,Y,ge,ne,W,K,Z,J,X,ee],styles:[".personnel-container[_ngcontent-%COMP%]{padding:24px 50px 24px 10px;width:calc(100% - 80px);margin:0;display:flex;flex-direction:row;gap:20px;height:800px;min-height:800px;max-height:none}.personnel-container[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:2rem;color:#333;margin-bottom:24px}.personnel-container[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:16px;font-size:2rem;height:40px;width:40px;color:#1976d2}.personnel-container[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]{background-color:#fff;padding:24px;border-radius:8px;box-shadow:0 2px 8px #0000001a;margin-bottom:24px;width:350px;height:800px;max-height:800px;overflow-y:auto}.personnel-container[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.3rem;color:#333;margin-bottom:16px;padding-bottom:8px;border-bottom:1px solid #f0f0f0}.personnel-container[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.personnel-container[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{margin-bottom:16px}.personnel-container[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;display:block}.personnel-container[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .button-row[_ngcontent-%COMP%]{display:flex;gap:16px;margin-top:16px}.personnel-container[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{align-self:flex-start;margin-top:1rem;background-color:#1976d2;color:#fff}.personnel-container[_ngcontent-%COMP%]   .list-section[_ngcontent-%COMP%]{background-color:#fff;padding:24px;border-radius:8px;box-shadow:0 2px 8px #0000001a;width:100%;height:800px;max-height:800px;overflow-y:auto}.personnel-container[_ngcontent-%COMP%]   .list-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.3rem;color:#333;margin-bottom:16px;padding-bottom:8px;border-bottom:1px solid #f0f0f0}.personnel-container[_ngcontent-%COMP%]   .list-section[_ngcontent-%COMP%]   .filter-field[_ngcontent-%COMP%]{width:100%;margin-bottom:16px}.personnel-container[_ngcontent-%COMP%]   .list-section[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{overflow-x:auto}.personnel-container[_ngcontent-%COMP%]   .list-section[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;margin-top:0rem;border-radius:4px;overflow:hidden}.personnel-container[_ngcontent-%COMP%]   .list-section[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{background-color:#f5f5f5;font-weight:500;color:#333;padding:1rem}.personnel-container[_ngcontent-%COMP%]   .list-section[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{padding:1rem}.personnel-container[_ngcontent-%COMP%]   .list-section[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-mdc-row[_ngcontent-%COMP%]{height:40px!important}.personnel-container[_ngcontent-%COMP%]   .list-section[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]{margin-top:16px}.personnel-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#1976d2;margin-bottom:1.5rem}.personnel-container[_ngcontent-%COMP%]   .status-active[_ngcontent-%COMP%]{color:#4caf50}.personnel-container[_ngcontent-%COMP%]   .status-inactive[_ngcontent-%COMP%]{color:#f44336}.personnel-container[_ngcontent-%COMP%]   .edit-button[_ngcontent-%COMP%]{color:#ffc107}@media (max-width: 992px){.personnel-container[_ngcontent-%COMP%]{flex-direction:column}.personnel-container[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]{flex:1 1 auto;max-width:100%}}@media (max-width: 768px){.personnel-container[_ngcontent-%COMP%]{padding:16px;width:calc(100% - 32px)}}.button-group[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:1rem;width:100%}.button-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:120px}  .success-snackbar{background-color:#4caf50!important;color:#fff!important;margin-top:100px!important;border-radius:4px!important;box-shadow:0 3px 5px #0003!important}  .success-snackbar .mat-mdc-button{color:#fff!important;font-weight:500!important}  .success-snackbar .mat-simple-snackbar{font-weight:500!important}  .error-snackbar{background-color:#f44336!important;color:#fff!important;margin-top:100px!important;border-radius:4px!important;box-shadow:0 3px 5px #0003!important}  .error-snackbar .mat-mdc-button{color:#fff!important;font-weight:500!important}  .error-snackbar .mat-simple-snackbar{font-weight:500!important}"]})};export{Ee as PersonnelManagementComponent};
